new entry "ExtraAttack"
type "PassiveData"
data "DisplayName" "Shared_Passive_ExtraAttack_DisplayName"
data "Description" "Shared_Passive_ExtraAttack_Description"
data "Icon" "PassiveFeature_ExtraAttack"
data "Properties" "Highlighted"
data "Conditions" "(IsWeaponAttack() or IsUnarmedAttack() or SpellId('Target_CommandersStrike') or SpellId('Target_Shove') or SpellId('Target_Shove_Player_Push') or SpellId('Target_Shove_Player_Prone')) and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack) and not IsSpell() and not HasStatus('EXTRA_ATTACK_2',context.Source) and not HasStatus('EXTRA_ATTACK_3',context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,EXTRA_ATTACK,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "ExtraAttack_2"
type "PassiveData"
using "ExtraAttack"
data "Properties" "IsHidden"
data "Conditions" ""
data "StatsFunctors" ""
data "StatsFunctorContext" ""

new entry "ExtraAttack_3"
type "PassiveData"
using "ExtraAttack"
data "Properties" "IsHidden"
data "Conditions" ""
data "StatsFunctors" ""
data "StatsFunctorContext" ""

new entry "ShortResting"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "IF(not IsSummon()):ApplyStatus(SHORT_REST,100,-1);IF(IsSummon()):RegainHitPoints(MaxHP/2)"
data "StatsFunctorContext" "OnShortRest"

new entry "ShortRest_SongOfRest"
type "PassiveData"
data "Properties" "IsHidden"
data "Conditions" "SpellId('Shout_RegainHP_1') or SpellId('Shout_RegainHP_2') or SpellId('Shout_RegainHP_3') or SpellId('Shout_RegainHP_Wildshape_1') or SpellId('Shout_RegainHP_Wildshape_2') or SpellId('Shout_RegainHP_Wildshape_3')"
data "StatsFunctors" "IF(HasStatus('SONG_OF_REST',context.Source)):RegainHitPoints(1d6);IF(HasStatus('SONG_OF_REST_2',context.Source)):RegainHitPoints(1d8);IF(HasStatus('SONG_OF_REST_3',context.Source)):RegainHitPoints(1d10);IF(HasStatus('SONG_OF_REST_4',context.Source)):RegainHitPoints(1d12)"
data "StatsFunctorContext" "OnHeal"

new entry "BookOfAncientSecrets_Spells"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('CEREMONY_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source)):UnlockSpell(Target_Ceremony_Ritual);IF(HasStatus('DETECT_MAGIC_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source)):UnlockSpell(Shout_DetectMagic_Ritual);IF(HasStatus('FIND_FAMILIAR_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source)):UnlockSpell(Target_FindFamiliar_Ritual);IF(HasStatus('SPEAK_WITH_ANIMALS_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source)):UnlockSpell(Shout_SpeakWithAnimals_Ritual);IF(HasStatus('UNSEEN_SERVANT_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source)):UnlockSpell(Target_UnseenServant_Ritual);IF(HasStatus('SILENCE_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source) and CharacterLevelGreaterThan(2)):UnlockSpell(Target_Silence_Ritual);IF(HasStatus('WATER_WALK_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source) and CharacterLevelGreaterThan(4)):UnlockSpell(Shout_WaterWalk_Ritual);IF(HasStatus('FEIGN_DEATH_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source) and CharacterLevelGreaterThan(4)):UnlockSpell(Target_FeignDeath_Ritual);IF(HasStatus('COMMUNE_WITH_NATURE_RITUAL',context.Source) and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source) and CharacterLevelGreaterThan(8)):UnlockSpell(Shout_CommuneWithNature_Ritual);IF(HasStatus('TELEPATHIC_BOND_RITUAL',context.Source) and HasPactOfTheTome() and HasPactOfTheTome() and HasPassive('BookOfAncientSecrets',context.Source) and CharacterLevelGreaterThan(8)):UnlockSpell(Target_RarysTelepathicBond_Ritual)"
data "BoostContext" "OnStatusApplied;OnCreate;OnEquip"

new entry "Rage_Rage_Boosts"
type "PassiveData"
data "DisplayName" "Shared_Passive_Rage_Rage_Boosts_DisplayName"
data "Description" "Shared_Passive_Rage_Rage_Boosts_Description"
data "Properties" "IsHidden"
data "Boosts" "Advantage(Ability, Strength); Advantage(SavingThrow, Strength); Resistance(Slashing, Resistant); Resistance(Piercing, Resistant); Resistance(Bludgeoning, Resistant); IF(WeaponAttackRollAbility(Ability.Strength) and HasDamageEffectFlag(DamageFlags.Hit)): CharacterWeaponDamage(2);EntityThrowDamage(2)"
data "BoostConditions" "not HasHeavyArmor(context.Source)"
data "BoostContext" "OnEquip;OnCreate"

new entry "RecklessAttack"
type "PassiveData"
data "DisplayName" "Reckless Attack"
data "Description" "When you make your first attack on your turn, you can decide to attack recklessly. Doing so gives you Advantage on melee weapon Attack Rolls using Strength during this turn, but Attack Rolls against you have Advantage until your next turn."
data "Icon" "Action_Barbarian_RecklessAttack"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "IF(HasStatus('RECKLESS_ATTACK_EFFECT',context.Source)):ApplyStatus(SELF,RECKLESS_ATTACK_BLOCK,100,1)"
data "StatsFunctorContext" "OnAttack"
data "ToggleOnFunctors" "ApplyStatus(RECKLESS_ATTACK_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(RECKLESS_ATTACK_TOGGLE);IF(not HasStatus('RECKLESS_ATTACK_BLOCK',context.Source)):RemoveStatus(RECKLESS_ATTACK_EFFECT)"

new entry "DraconicAncestry_Black"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Black_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Black_Description"
data "Boosts" "UnlockSpell(Target_Grease,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Projectile_AcidArrow,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_EnemiesAbound,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Blue"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Blue_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Blue_Description"
data "Boosts" "UnlockSpell(Projectile_WitchBolt,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_DustDevil,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Zone_LightningBolt,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Brass"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Brass_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Brass_Description"
data "Boosts" "UnlockSpell(Target_Sleep,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_Suggestion,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Shout_MinuteMeteors,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Bronze"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Bronze_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Bronze_Description"
data "Boosts" "UnlockSpell(Target_FogCloud,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Zone_GustOfWind,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_Fly,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Copper"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Copper_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Copper_Description"
data "Boosts" "UnlockSpell(Target_HideousLaughter,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_SpikeGrowth,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_Slow,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Gold"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Gold_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Gold_Description"
data "Boosts" "UnlockSpell(Shout_DisguiseSelf,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Projectile_ScorchingRay,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Shout_AshardalonsStride,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Green"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Green_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Green_Description"
data "Boosts" "UnlockSpell(Projectile_RayOfSickness,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_Invisibility,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_StinkingCloud,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Red"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Red_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Red_Description"
data "Boosts" "UnlockSpell(Zone_BurningHands,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Zone_AganazzarsScorcher,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Projectile_Fireball,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_Silver"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_Silver_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_Silver_Description"
data "Boosts" "UnlockSpell(Shout_FeatherFall,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_HoldPerson,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Shout_WaterWalk,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicAncestry_White"
type "PassiveData"
data "DisplayName" "Shared_Passive_DraconicAncestry_White_DisplayName"
data "Description" "Shared_Passive_DraconicAncestry_White_Description"
data "Boosts" "UnlockSpell(Shout_ArmorOfAgathys,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_SnillocsSnowballStorm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_SleetStorm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicMagic"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_DragonsBreath,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "DraconicMagic_2"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Zone_Fear,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "ElementalAffinity_Desc"
type "PassiveData"
data "DisplayName" "Elemental Affinity"
data "Description" "When you cast a spell that deals damage of the type associated with your draconic ancestry, add your Charisma modifier to that damage. At the same time, you can spend 1 sorcery point to gain resistance to that damage type."
data "Properties" "IsHidden"

new entry "ElementalAffinity"
type "PassiveData"
data "DisplayName" "Elemental Affinity"
data "Description" "When you cast a spell that deals damage of the type associated with your draconic ancestry, add your Charisma modifier to that damage. At the same time, you can spend 1 sorcery point to gain resistance to that damage type."
data "Icon" "Skill_Sorcerer_Passive_ElementalAffinity_Resistance"
data "Properties" "Highlighted"
data "Conditions" "HasSpellFlag(SpellFlags.Spell)"
data "StatsFunctors" "IF(HasDamageDoneForType(DamageType.Acid) and (HasPassive('DraconicAncestry_Black',context.Source) or HasPassive('DraconicAncestry_Copper',context.Source))):DealDamage(CharismaModifier,Acid);IF(HasDamageDoneForType(DamageType.Lightning) and (HasPassive('DraconicAncestry_Blue',context.Source) or HasPassive('DraconicAncestry_Bronze',context.Source))):DealDamage(CharismaModifier,Lightning);IF(HasDamageDoneForType(DamageType.Fire) and not ScorchingRay() and (HasPassive('DraconicAncestry_Brass',context.Source) or HasPassive('DraconicAncestry_Gold',context.Source) or HasPassive('DraconicAncestry_Red',context.Source)) and not FireSpellExemptions()):DealDamage(CharismaModifier,Fire);IF(HasDamageDoneForType(DamageType.Poison) and HasPassive('DraconicAncestry_Green',context.Source)):DealDamage(CharismaModifier,Poison);IF(HasDamageDoneForType(DamageType.Cold) and (HasPassive('DraconicAncestry_Silver',context.Source) or HasPassive('DraconicAncestry_White',context.Source))):DealDamage(CharismaModifier,Cold);IF(HasDamageDoneForType(DamageType.Cold) or HasDamageDoneForType(DamageType.Acid) or HasDamageDoneForType(DamageType.Fire) or HasDamageDoneForType(DamageType.Lightning) or HasDamageDoneForType(DamageType.Poison)):ApplyStatus(SELF,ELEMENTAL_AFFINITY_RESISTANCE,100,1);IF(ScorchingRay() and HasDamageEffectFlag(DamageFlags.Hit) and not HasStatus('SCORCHING_RAY_BLOCK',context.Source)):DealDamage(CharismaModifier,Fire);IF(ScorchingRay() and HasDamageEffectFlag(DamageFlags.Hit) and not HasStatus('SCORCHING_RAY_BLOCK',context.Source)):ApplyStatus(SELF,SCORCHING_RAY_BLOCK,100,1)"
data "StatsFunctorContext" "OnDamage"

new entry "BendLuck"
type "PassiveData"
data "DisplayName" "Bend Luck"
data "Description" "Twist fate using your wild magic. You can use your reaction and spend 2 sorcery points to roll a d4 and apply the number rolled as a bonus or penalty to another creature's Attack Roll, Ability Check, or Saving Throw."
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Icon" "Skill_Sorcerer_Passive_BendLuck"
data "ToggleOnFunctors" "ApplyStatus(BEND_LUCK_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(BEND_LUCK_TOGGLE)"
data "TooltipUseCosts" "ReactionActionPoint:1;SorceryPoint:2"
data "Boosts" "UnlockInterrupt(Interrupt_BendLuck_Ally);UnlockInterrupt(Interrupt_BendLuck_Enemy)"

new entry "BendLuck_Ally"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "RollBonus(SkillCheck,1d4);RollBonus(RawAbility,1d4)"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):ApplyStatus(BEND_LUCK_REMOVE,100,1)"
data "StatsFunctorContext" "OnAbilityCheck"

new entry "BendLuck_Enemy"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "RollBonus(SkillCheck,-1d4);RollBonus(RawAbility,-1d4)"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):ApplyStatus(BEND_LUCK_REMOVE,100,1)"
data "StatsFunctorContext" "OnAbilityCheck"

new entry "PsionicSpells"
type "PassiveData"
data "DisplayName" "Psionic Spells"
data "Description" "Your aberrant nature changes your mind in subtle but profound ways. You learn additional spells when you reach certain levels in this class at 1st, 3rd, 5th, 7th and 9th level."

new entry "TelepathicSpeech_Desc"
type "PassiveData"
data "DisplayName" "Telepathic Speech"
data "Description" "You can form a telepathic connection between your mind and the mind of another. It ends early if you are incapacitated or die or if you use this ability to form a connection with a different creature."
data "Properties" "IsHidden"

new entry "TelepathicSpeech"
type "PassiveData"
data "DisplayName" "Telepathic Speech"
data "Description" "You can form a telepathic connection between your mind and the mind of another. It ends early if you are incapacitated or die or if you use this ability to form a connection with a different creature."
data "Icon" "PassiveFeature_Sorcerer_TelepathicSpeech"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_TelepathicSpeech)"

new entry "PsionicSorcery"
type "PassiveData"
data "DisplayName" "Psionic Sorcery"
data "Description" "When you cast any of the spells gained from your Psionic Spells feature, you can cast it by expending a spell slot as normal or by spending a number of Sorcery Points equal to the spell's level. If you cast the spell using sorcery points, it requires no components."
data "Icon" "PassiveFeature_Sorcerer_PsionicSorcery"
data "Properties" "Highlighted"

new entry "PsionicSorcery_DissonantWhispers"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('DISSONANTWHISPERS_PSIONIC',context.Source)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_2);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_3);IF(ConditionResult(context.Source.Level > 6)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_4);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_DissonantWhispers_PsionicSorcery_9)"

new entry "PsionicSorcery_ArmsOfHadar"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('ARMSOFHADAR_PSIONIC',context.Source)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery);IF(ConditionResult(context.Source.Level > 2)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_2);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_3);IF(ConditionResult(context.Source.Level > 6)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_4);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Shout_ArmsOfHadar_PsionicSorcery_9)"

new entry "PsionicSorcery_CalmEmotions"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('CALMEMOTIONS_PSIONIC',context.Source)):UnlockSpell(Target_CalmEmotions_PsionicSorcery);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_3);IF(ConditionResult(context.Source.Level > 6)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_4);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_CalmEmotions_PsionicSorcery_9)"

new entry "PsionicSorcery_DetectThoughts"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('DETECTTHOUGHTS_PSIONIC',context.Source)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery);IF(ConditionResult(context.Source.Level > 4)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_3);IF(ConditionResult(context.Source.Level > 6)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_4);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Shout_DetectThoughts_PsionicSorcery_9)"

new entry "PsionicSorcery_HungerOfHadar"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('HUNGEROFHADAR_PSIONIC',context.Source)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery);IF(ConditionResult(context.Source.Level > 6)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_4);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_HungerOfHadar_PsionicSorcery_9)"

new entry "PsionicSorcery_EvardsBlackTentacles"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('EVARDSBLACKTENTACLES_PSIONIC',context.Source)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery);IF(ConditionResult(context.Source.Level > 8)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery_5);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_EvardsBlackTentacles_PsionicSorcery_9)"

new entry "PsionicSorcery_RarysTelepathicBond"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('RARYSTELEPATHICBOND_PSIONIC',context.Source)):UnlockSpell(Target_RarysTelepathicBond_PsionicSorcery);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_RarysTelepathicBond_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_RarysTelepathicBond_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_RarysTelepathicBond_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_RarysTelepathicBond_PsionicSorcery_9)"

new entry "PsionicSorcery_Telekinesis"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('TELEKINESIS_PSIONIC',context.Source)):UnlockSpell(Target_Telekinesis_PsionicSorcery);IF(ConditionResult(context.Source.Level > 10)):UnlockSpell(Target_Telekinesis_PsionicSorcery_6);IF(ConditionResult(context.Source.Level > 12)):UnlockSpell(Target_Telekinesis_PsionicSorcery_7);IF(ConditionResult(context.Source.Level > 14)):UnlockSpell(Target_Telekinesis_PsionicSorcery_8);IF(ConditionResult(context.Source.Level > 16)):UnlockSpell(Target_Telekinesis_PsionicSorcery_9)"

new entry "PsionicDefenses"
type "PassiveData"
data "DisplayName" "Psionic Defenses"
data "Description" "You gain resistance to Psychic damage and you have advantage against being Charmed and Frightened."
data "Boosts" "Resistance(Psychic,Resistant);Tag(FRIGHTENED_ADV);Tag(CHARMED_ADV)"

new entry "ClockworkMagic"
type "PassiveData"
data "DisplayName" "Clockwork Magic"
data "Description" "You learn additional spells when you reach certain levels in this class at 1st, 3rd, 5th, 7th and 9th level."

new entry "RestoreBalance"
type "PassiveData"
data "DisplayName" "Restore Balance"
data "Description" "Your connection to the plane of absolute order allows you to equalize chaotic moments. You can use your reaction to prevent the roll of a creature you can see within 18m from being affected by advantage or disadvantage. You can use this feature a number of times equal to your proficiency bonus (minimum of once), and you regain all expended uses when you finish a long rest."
data "Icon" "PassiveFeature_Sorcerer_RestoreBalance"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(RESTORE_BALANCE_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(RESTORE_BALANCE_TOGGLE)"

new entry "RestoreBalance_Ally"
type "PassiveData"
data "Boosts" "IF(HasDisadvantage()):Advantage(AttackRoll);IF(HasDisadvantage()):Advantage(AllSavingThrows)"
data "StatsFunctors" "RemoveAuraByChildStatus(RESTORE_BALANCE_ALLY);RemoveStatus(SELF,RESTORE_BALANCE_ALLY);ApplyStatus(SELF,RESTORE_BALANCE_AURA,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "RestoreBalance_Enemy"
type "PassiveData"
data "Boosts" "IF(HasAdvantage()):Disadvantage(AttackRoll);IF(HasAdvantage()):Disadvantage(AllSavingThrows)"
data "StatsFunctors" "RemoveAuraByChildStatus(RESTORE_BALANCE_ENEMY);RemoveStatus(SELF,RESTORE_BALANCE_ENEMY);ApplyStatus(SELF,RESTORE_BALANCE_AURA,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "BastionOfLaw"
type "PassiveData"
data "DisplayName" "Bastion of Law"
data "Description" "You can imbue a creature with a shimmering shield of order. As an action, you can expend 1 to 5 sorcery points to create a magical ward around yourself or another creature within 9m. The ward lasts until you finish a long rest or until you use this feature again. The ward is represented as a number of d8s equal to the number of sorcery points spent to create it that serves as temporary hit points. When the ward would take damage, you use your reaction and the ward is destroyed."
data "Icon" "PassiveFeature_Sorcerer_BulwarkOfLaw"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_BastionOfLaw,AddChildren,,,Charisma)"

new entry "DivineMagic"
type "PassiveData"
data "DisplayName" "Divine Magic"
data "Description" "Your link to the divine allows you to learn spells normally associated with the cleric class. In addition, you may choose a spell that aligns with the affinity of the source of your divine power, being good, evil, law, chaos, or neutrality."

new entry "Good"
type "PassiveData"
data "DisplayName" "Good"
data "Description" "The affinity of your source of power is good."
data "Boosts" "UnlockSpell(Target_CureWounds,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(2)):UnlockSpell(Shout_PrayerOfHealing,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Target_Revivify,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "Evil"
type "PassiveData"
data "DisplayName" "Evil"
data "Description" "The affinity of your source of power is evil."
data "Boosts" "UnlockSpell(Target_InflictWounds,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(2)):UnlockSpell(Projectile_RayOfEnfeeblement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Target_AnimateDead,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "Law"
type "PassiveData"
data "DisplayName" "Law"
data "Description" "The affinity of your source of power is lawful."
data "Boosts" "UnlockSpell(Target_Bless,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(2)):UnlockSpell(Target_CalmEmotions,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Target_RemoveCurse,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "Chaos"
type "PassiveData"
data "DisplayName" "Chaos"
data "Description" "The affinity of your source of power is chaotic."
data "Boosts" "UnlockSpell(Target_Bane,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(2)):UnlockSpell(Target_CrownOfMadness,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Target_BestowCurse,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "Neutrality"
type "PassiveData"
data "DisplayName" "Neutrality"
data "Description" "The affinity of your source of power is neutral."
data "Boosts" "UnlockSpell(Target_ProtectionFromEvilAndGood,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(2)):UnlockSpell(Target_HoldPerson,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Shout_SpiritGuardians,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "FavoredByTheGods_Desc"
type "PassiveData"
data "DisplayName" "Favored By The Gods"
data "Description" "Divine power guards your destiny. You can roll a 2d4 and add it to the total of an attack roll or saving throw. Once you use this feature, you can’t use it again until you finish a short or long rest."
data "Properties" "IsHidden"

new entry "FavoredByTheGods"
type "PassiveData"
data "DisplayName" "Favored By The Gods"
data "Description" "Divine power guards your destiny. You can roll a 2d4 and add it to the total of an attack roll or saving throw. Once you use this feature, you can’t use it again until you finish a short or long rest."
data "Boosts" "UnlockSpell(Shout_FavoredByTheGods,AddChildren,,,Charisma)"

new entry "EmpoweredHealing_Desc"
type "PassiveData"
data "DisplayName" "Empowered Healing"
data "Description" "The divine energy coursing through you can empower healing spells. Whenever you or an ally within [1] of you rolls dice to determine the number of hit points a spell restores, you can spend 1 sorcery point to reroll those dice once, provided you aren't incapacitated. You can use this feature only once per turn."
data "DescriptionParams" "Distance(2)"
data "Properties" "IsHidden"

new entry "EmpoweredHealing"
type "PassiveData"
data "DisplayName" "Empowered Healing"
data "Description" "The divine energy coursing through you can empower healing spells. Whenever you or an ally within [1] of you rolls dice to determine the number of hit points a spell restores, you can spend 1 sorcery point to reroll those dice once, provided you aren't incapacitated. You can use this feature only once per turn."
data "DescriptionParams" "Distance(2)"
data "Properties" "Highlighted;MetaMagic"
data "Icon" "PassiveFeature_Sorcerer_EmpoweredHealing"
data "Boosts" "UnlockSpell(Shout_EmpoweredHealing,AddChildren,,,Charisma)"
data "ToggleGroup" "Metamagic"

new entry "EmpoweredHealing_Heal"
type "PassiveData"
data "DisplayName" "Empowered Healing"
data "Description" "The divine energy coursing through you can empower healing spells. Whenever you or an ally within [1] of you rolls dice to determine the number of hit points a spell restores, you can spend 1 sorcery point to reroll those dice once, provided you aren't incapacitated. You can use this feature only once per turn."
data "DescriptionParams" "Distance(2)"
data "Properties" "IsHidden"
data "Conditions" "HasSpellFlag(SpellFlags.Spell) and ConditionResult(context.HitDescription.SpellPowerLevel > 0)"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1)):RegainHitPoints(2);IF(SpellPowerLevelEqualTo(2)):RegainHitPoints(4);IF(SpellPowerLevelEqualTo(3)):RegainHitPoints(6);RemoveStatus(EMPOWERED_HEALING);RemoveStatus(EMPOWERED_HEALING_ALLY);RemoveStatus(SELF,EMPOWERED_HEALING)"
data "StatsFunctorContext" "OnHeal"

new entry "EyesOfTheDark"
type "PassiveData"
data "DisplayName" "Eyes of the Dark: Darkvision"
data "Description" "You have darkvision with a range of [1]."
data "DescriptionParams" "Distance(36)"
data "Icon" "PassiveFeature_SuperiorDarkvision"
data "Properties" "Highlighted"
data "Boosts" "DarkvisionRangeMin(36);ActiveCharacterLight(c46e7ba8-e746-7020-5146-287474d7b9f7)"

new entry "EyesOfTheDark_DarknessSpell_Desc"
type "PassiveData"
data "DisplayName" "Eyes of the Dark: Darkness"
data "Description" "You learn the Darkness spell. In addition, you can cast it by spending 2 Sorcery Points or by expending a spell slot. If you cast it with sorcery points, you can see through the darkness created by the spell."
data "Properties" "IsHidden"

new entry "EyesOfTheDark_DarknessSpell_Spell"
type "PassiveData"
data "Properties" "IsHidden"
data "DisplayName" "Eyes of the Dark: Darkness"
data "Description" "You learn the Darkness spell. In addition, you can cast it by spending 2 Sorcery Points or by expending a spell slot. If you cast it with sorcery points, you can see through the darkness created by the spell."
data "Icon" "Spell_Evocation_Darkness"
data "Properties" "Highlighted"
data "Boosts" "IF(not HasStatus('EYESOFTHEDARK_DARKNESS',context.Source)):UnlockSpell(Target_Darkness,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"

new entry "EyesOfTheDark_DarknessSpell"
type "PassiveData"
data "DisplayName" "Eyes of the Dark"
data "Description" "Set the Darkness spell to expend 2 sorcery points instead of a spell slot."
data "Icon" "Spell_Evocation_Darkness"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;IsHidden;MetaMagic"
data "Boosts" "UnlockSpell(Target_Darkness_EyesOfTheDark,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Charisma)"
data "ToggleOnFunctors" "ApplyStatus(EYESOFTHEDARK_DARKNESS,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(EYESOFTHEDARK_DARKNESS)"
data "ToggleGroup" "Metamagic"

new entry "DarknessSpell"
type "PassiveData"
data "Properties" "IsHidden"
data "Conditions" "SpellId('Target_Darkness_EyesOfTheDark_Surface') or SpellId('Target_Darkness_EyesOfTheDark_Item')"
data "StatsFunctors" "ApplyStatus(SELF,DARKNESS_SIGHT,100,10)"
data "StatsFunctorContext" "OnCast;OnAttack"

new entry "StrengthOfTheGrave"
type "PassiveData"
data "DisplayName" "Strength of the Grave"
data "Description" "Your existence in a twilight state between life and death makes you difficult to defeat. When damage reduces you to 0 hit points, you instead drop to 1 hit point. You can't use this feature if you are reduced to 0 hit points by radiant damage or by a critical hit. If you successfully revive, you can't use this feature again until you finish a long rest."
data "Conditions" "HasHPLessThan(1) and not (HasDamageDoneForType(DamageType.Radiant) or HasDamageEffectFlag(DamageFlags.Critical))"
data "Properties" "OncePerLongRest;Highlighted"
data "Icon" "PassiveFeature_Sorcerer_StrengthOfTheGrave"
data "StatsFunctors" "IF(not HasStatus('STRENGTH_OF_THE_GRAVE_BLOCK',context.Source)):ApplyStatus(STRENGTH_OF_THE_GRAVE,100,0);IF(not HasStatus('STRENGTH_OF_THE_GRAVE_BLOCK',context.Source)):RegainHitPoints(1)"
data "StatsFunctorContext" "OnDamaged"

new entry "HoundOfIllOmen"
type "PassiveData"
data "DisplayName" "Hound of Ill Omen"
data "Description" "You gain the ability to call forth a howling creature of darkness to harass your foes. As a bonus action, you can spend 3 sorcery points to summon a hound of ill omen to target one creature within 36m of you."
data "Icon" "PassiveFeature_Sorcerer_HoundOfIllOmen"
data "Properties" "Highlighted"
data "Boosts" "IF(not HasStatus('HOUNDOFILLOMEN_SPELL',context.Source)):UnlockSpell(Target_HoundOfIllOmen_Precursor,AddChildren,,,Charisma)"
data "StatsFunctors" "ApplyStatus(SELF,)"
data "StatsFunctorContext" "OnCast;OnAttack"

new entry "HoundOfIllOmen_Tracking"
type "PassiveData"
data "Properties" "IsHidden"
data "Conditions" "HasHPLessThan(1)"
data "StatsFunctors" "RemoveStatus(SELF,HOUND_OF_ILL_OMEN_AURA)"
data "StatsFunctorContext" "OnAttacked;OnDamaged"

new entry "AttackOfOpportunity_HoundOfIllOmen"
type "PassiveData"
data "DisplayName" "Shared_Passive_AttackOfOpportunity_DisplayName"
data "Description" "Shared_Passive_AttackOfOpportunity_Description"
data "ExtraDescription" "Shared_Passive_AttackOfOpportunity_ExtraDescription"
data "Icon" "PassiveFeature_AttackOfOpportunity"
data "Conditions" "HasActionResource('ReactionActionPoint', 1, 0, false, context.Source) and Enemy() and HasStatus('HOUND_OF_ILL_OMEN_TARGET') and not WieldingWeapon('Ammunition', false, false, context.Source) and not HasStatus('SG_Incapacitated', context.Source) and not HasStatus('SG_Unconscious', context.Source) and not (not Player(context.Source) and Tagged('AI_IGNORED_TARGET')  and not HasStatus('GNOLL_SUDDENRUSH')) and not HasStatus('SHOCKWAVE') and not (HasStatus('MOBILE_NO_AOO', context.Source) and HasStatus('MOBILE_NO_AOO_SOURCE', context.Target)) and not HasStatus('FLAMING_SPHERE_AURA') and not HasStatus('SNEAKING',context.Target) and not HasStatus('SG_Ignore_AOO',context.Target)"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar"
data "StatsFunctors" "UseActionResource(SELF, ReactionActionPoint,1);IF(not HasPassive('Sentinel_ZeroSpeed',context.Source)):UseAttack();IF(HasPassive('Sentinel_ZeroSpeed',context.Source)):UseSpell(Target_Sentinel_AttackOfOpportunity,true,true,true)"
data "StatsFunctorContext" "OnLeaveAttackRange"

new entry "TempestuousMagic"
type "PassiveData"
data "DisplayName" "Tempestuous Magic"
data "Description" "You can use a bonus action on your turn to cause whirling gusts of elemental air to briefly surround you, immediately after you cast a spell of 1st level or higher. Doing so allows you to fly up to 3m without provoking opportunity attacks."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Sorcerer_TempestuousMagic"
data "Conditions" "not IsCantrip()"
data "StatsFunctors" "ApplyStatus(SELF,TEMPESTUOUS_MAGIC,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "HeartOfTheStorm_Desc"
type "PassiveData"
data "DisplayName" "Heart of the Storm"
data "Description" "You gain resistance to Lightning and Thunder damage. In addition, whenever you cast a spell of 1st level or higher that deals Lightning or Thunder damage, stormy magic erupts from you. This eruption causes creatures of your choice within 3m of you to take Lightning or Thunder damage (choose each time this ability activates) equal to half your sorcerer level."
data "Properties" "IsHidden"

new entry "HeartOfTheStorm"
type "PassiveData"
data "DisplayName" "Heart of the Storm"
data "Description" "Toggle on to deal Lightning damage within a [1] around you or toggle off to deal Thunder damage."
data "DescriptionParams" "Distance(3)"
data "Boosts" "Resistance(Thunder,Resistant);Resistance(Lightning,Resistant)"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn;Highlighted"
data "Icon" "PassiveFeature_Sorcerer_HeartOfTheStorm"
data "ToggleOnFunctors" "IF(HasStatus('HEART_OF_THE_STORM_THUNDER',context.Source)):ApplyStatus(HEART_OF_THE_STORM_LIGHTNING,100,-1);IF(HasStatus('HEART_OF_THE_STORM_LIGHTNING',context.Source)):ApplyStatus(HEART_OF_THE_STORM_THUNDER,100,-1);IF(not HasStatus('HEART_OF_THE_STORM_THUNDER',context.Source) and not HasStatus('HEART_OF_THE_STORM_LIGHTNING',context.Source)):ApplyStatus(HEART_OF_THE_STORM_LIGHTNING,100,-1)"
data "ToggleOffFunctors" "IF(HasStatus('HEART_OF_THE_STORM_THUNDER',context.Source)):ApplyStatus(HEART_OF_THE_STORM_LIGHTNING,100,-1);IF(HasStatus('HEART_OF_THE_STORM_LIGHTNING',context.Source)):ApplyStatus(HEART_OF_THE_STORM_THUNDER,100,-1);IF(not HasStatus('HEART_OF_THE_STORM_THUNDER',context.Source) and not HasStatus('HEART_OF_THE_STORM_LIGHTNING',context.Source)):ApplyStatus(HEART_OF_THE_STORM_LIGHTNING,100,-1)"

new entry "HeartOfTheStorm_Lightning"
type "PassiveData"
data "DisplayName" "Heart of the Storm: Lightning"
data "Properties" "IsHidden"
data "Conditions" "HasDamageDoneForType(DamageType.Lightning) and not SpellId('Projectile_HeartOfTheStorm_Lightning_Explosion') and ConditionResult(context.HitDescription.SpellPowerLevel > 0)"
data "StatsFunctors" "CreateExplosion(Projectile_HeartOfTheStorm_Lightning_Explosion)"
data "StatsFunctorContext" "OnDamage"

new entry "HeartOfTheStorm_Thunder"
type "PassiveData"
data "DisplayName" "Heart of the Storm: Thunder"
data "Properties" "IsHidden"
data "Conditions" "HasDamageDoneForType(DamageType.Thunder) and not SpellId('Projectile_HeartOfTheStorm_Thunder_Explosion') and ConditionResult(context.HitDescription.SpellPowerLevel > 0)"
data "StatsFunctors" "CreateExplosion(Projectile_HeartOfTheStorm_Thunder_Explosion)"
data "StatsFunctorContext" "OnDamage"

new entry "MetamagicAdept"
type "PassiveData"
data "DisplayName" "Metamagic Adept"
data "Description" "Learn 2 Metamagic options from the sorcerer class."
data "Boosts" "UnlockSpell(Shout_Metamagic_Container);UnlockSpell(Shout_Metamagic_Removal)"

new entry "MetamagicAdept_SorceryPoints"
type "PassiveData"
data "DisplayName" "Metamagic Adept"
data "Description" "You gain 2 sorcery points which may only be expended on Metamagic."
data "Boosts" "ActionResource(SorceryPoint,2,0)"

new entry "SorcerousRestoration"
type "PassiveData"
data "DisplayName" "Sorcerous Restoration"
data "Description" "You regain 4 expended sorcery points whenever you finish a short rest."
data "StatsFunctors" "RestoreResource(SorceryPoint, 4, 0)"
data "StatsFunctorContext" "OnShortRest"

new entry "DragonWings"
type "PassiveData"
data "DisplayName" "Draconic Flight"
data "Description" "Gain the ability to fly like a dragon."
data "Icon" "PassiveFeature_Sorcerer_DragonWings"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_DragonWings)"

new entry "DraconicPresence"
type "PassiveData"
data "DisplayName" "Draconic Presence"
data "Description" "you can channel the dread presence of your dragon ancestor, causing those around you to become awestruck or frightened."
data "Icon" "Action_Sorcerer_DraconicPresence"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_DraconicPresence)"

new entry "WildMagic_SorceryPoints"
type "PassiveData"
data "DisplayName" "Shared_Passive_WildMagic_SorceryPoints_DisplayName"
data "Conditions" "not IsCantrip()"
data "Properties" "IsHidden"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1)):RestoreResource(SorceryPoint,1,0);IF(SpellPowerLevelEqualTo(2)):RestoreResource(SorceryPoint,2,0);IF(SpellPowerLevelEqualTo(3)):RestoreResource(SorceryPoint,3,0);IF(SpellPowerLevelEqualTo(4)):RestoreResource(SorceryPoint,4,0);IF(SpellPowerLevelEqualTo(5)):RestoreResource(SorceryPoint,5,0);IF(SpellPowerLevelEqualTo(6)):RestoreResource(SorceryPoint,6,0);IF(SpellPowerLevelEqualTo(7)):RestoreResource(SorceryPoint,7,0);IF(SpellPowerLevelEqualTo(8)):RestoreResource(SorceryPoint,8,0);IF(SpellPowerLevelEqualTo(9)):RestoreResource(SorceryPoint,9,0)"
data "StatsFunctorContext" "OnCast"

new entry "WildMagic_Heal"
type "PassiveData"
data "DisplayName" "Shared_Passive_WildMagic_Heal_DisplayName"
data "Conditions" "not IsCantrip()"
data "Properties" "IsHidden"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1)):CreateExplosion(Projectile_WildMagic_Heal);IF(SpellPowerLevelEqualTo(2)):CreateExplosion(Projectile_WildMagic_Heal_2);IF(SpellPowerLevelEqualTo(3)):CreateExplosion(Projectile_WildMagic_Heal_3);IF(SpellPowerLevelEqualTo(4)):CreateExplosion(Projectile_WildMagic_Heal_4);IF(SpellPowerLevelEqualTo(5)):CreateExplosion(Projectile_WildMagic_Heal_5);IF(SpellPowerLevelEqualTo(6)):CreateExplosion(Projectile_WildMagic_Heal_6);IF(SpellPowerLevelEqualTo(7)):CreateExplosion(Projectile_WildMagic_Heal_7);IF(SpellPowerLevelEqualTo(8)):CreateExplosion(Projectile_WildMagic_Heal_8);IF(SpellPowerLevelEqualTo(9)):CreateExplosion(Projectile_WildMagic_Heal_9)"
data "StatsFunctorContext" "OnAttack"

new entry "WildMagic"
type "PassiveData"
data "DisplayName" "Shared_Passive_WildMagic_DisplayName"
data "Description" "Shared_Passive_WildMagic_Description"
data "Conditions" "not IsCantrip() and HasSpellFlag(SpellFlags.Spell)"
data "StatsFunctors" "IF(Tagged('SORCERER_WILD_MAGIC_GUARANTEED', context.Source)):TriggerRandomCast(1,,WildMagic);IF(HasStatus('TIDES_OF_CHAOS',context.Source) and not Tagged('SORCERER_WILD_MAGIC_GUARANTEED', context.Source) and HasPassive('ControlledChaos',context.Source)):TriggerRandomCast(5,,WildMagic,WildMagicTurn);IF(HasStatus('TIDES_OF_CHAOS',context.Source) and not Tagged('SORCERER_WILD_MAGIC_GUARANTEED', context.Source) and not HasPassive('ControlledChaos',context.Source)):TriggerRandomCast(11,,WildMagic,WildMagicTurn);IF(not HasStatus('TIDES_OF_CHAOS',context.Source) and HasPassive('ControlledChaos',context.Source) and not (HasStatus('WILD_MAGIC_GUARANTEED',context.Source) or Tagged('SORCERER_WILD_MAGIC_SUPRESSED', context.Source))):TriggerRandomCast(11,,WildMagic,WildMagicTurn);IF(not HasStatus('TIDES_OF_CHAOS',context.Source) and not HasPassive('ControlledChaos',context.Source) and not (HasStatus('WILD_MAGIC_GUARANTEED',context.Source) or Tagged('SORCERER_WILD_MAGIC_SUPRESSED', context.Source))):TriggerRandomCast(20,,WildMagic,WildMagicTurn);IF(HasStatus('TIDES_OF_CHAOS',context.Source)):RemoveStatus(SELF,TIDES_OF_CHAOS)"
data "StatsFunctorContext" "OnCast"

new entry "ControlledChaos"
type "PassiveData"
data "DisplayName" "Controlled Chaos"
data "Description" "You gain a modicum of control over the surges of your wild magic. Your chances of triggering a wild magic surge increases considerably."
data "Icon" "PassiveFeature_Sorcerer_ControlledChaos"
data "Properties" "Highlighted"

new entry "SpellBombardment"
type "PassiveData"
data "DisplayName" "Spell Bombardment"
data "Description" "When you roll damage for a 1st level or higher spell, creatures must roll a Charisma Saving Throw or take an additional 1d4 in damage of the spell's damage type."
data "Icon" "PassiveFeature_Sorcerer_SpellBombardment"
data "Properties" "Highlighted"
data "Boosts" "IF(HasSpellFlag(SpellFlags.Spell) and not IsCantrip() and not SavingThrow(Ability.Charisma, SourceSpellDC())):DamageBonus(1d4)"

new entry "DiscipleOfLife"
type "PassiveData"
data "DisplayName" "Shared_Passive_DiscipleOfLife_DisplayName"
data "Description" "Shared_Passive_DiscipleOfLife_Description"
data "Icon" "PassiveFeature_DiscipleOfLife"
data "Conditions" "HealDoneGreaterThan(0) and not IsCantrip()"
data "Properties" "Highlighted"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1)):RegainHitPoints(3); IF(SpellPowerLevelEqualTo(2)):RegainHitPoints(4);IF(SpellPowerLevelEqualTo(3)):RegainHitPoints(5); ApplyStatus(PASSIVE_DISCIPLE_OF_LIFE,100,0)"
data "StatsFunctorContext" "OnHeal"

new entry "BlessedHealer"
type "PassiveData"
data "DisplayName" "Blessed Healer"
data "Description" "The healing spells you cast on others heal you as well. When you cast a spell of 1st level or higher that restores hit points to a creature other than you, you regain hit points equal to 2 plus the spell's level."
data "Conditions" "HealDoneGreaterThan(0) and not IsCantrip() and Character() and not Self()"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1)):RegainHitPoints(SELF,3); IF(SpellPowerLevelEqualTo(2)):RegainHitPoints(SELF,4);IF(SpellPowerLevelEqualTo(3)):RegainHitPoints(SELF,5)"
data "StatsFunctorContext" "OnHeal"

new entry "WardingFlare_ActionResource"
type "PassiveData"
data "DisplayName" "Shared_Passive_WardingFlare_DisplayName"
data "Properties" "IsHidden"
data "Boosts" "IF(ConditionResult(context.Source.Wisdom < 14)):ActionResource(WardingFlarePoint,1,0);IF(ConditionResult(context.Source.Wisdom >= 14) and ConditionResult(context.Source.Wisdom < 16)):ActionResource(WardingFlarePoint,2,0);IF(ConditionResult(context.Source.Wisdom >= 16) and ConditionResult(context.Source.Wisdom < 18)):ActionResource(WardingFlarePoint,3,0);IF(ConditionResult(context.Source.Wisdom >= 18) and ConditionResult(context.Source.Wisdom < 20)):ActionResource(WardingFlarePoint,4,0);IF(ConditionResult(context.Source.Wisdom >= 20) and ConditionResult(context.Source.Wisdom < 22)):ActionResource(WardingFlarePoint,5,0)"

new entry "WardingFlare"
type "PassiveData"
data "DisplayName" "Shared_Passive_WardingFlare_DisplayName"
data "Description" "Shared_Passive_WardingFlare_Description"
data "ExtraDescription" "Shared_Passive_WardingFlare_ExtraDescription"
data "Icon" "PassiveFeature_WardingFlare"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(WARDING_FLARE_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(WARDING_FLARE);RemoveStatus(WARDING_FLARE_TOGGLE)"

new entry "ImprovedFlare"
type "PassiveData"
data "DisplayName" "Improved Flare"
data "Description" "You can also use your Warding Flare feature when a creature that you can see within [1] of you attacks a creature other than you."
data "ExtraDescription" "Shared_Passive_WardingFlare_ExtraDescription"
data "DescriptionParams" "Distance(9)"
data "Icon" "Skill_Cleric_ImprovedFlare"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar"
data "ToggleOnFunctors" "ApplyStatus(IMPROVED_FLARE_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(IMPROVED_FLARE_AURA);RemoveStatus(IMPROVED_FLARE_TOGGLE)"

new entry "CloakOfShadows_Description"
type "PassiveData"
data "DisplayName" "Cloak of Shadows"
data "Description" "You can use your Channel Divinity to vanish. As an action, you become invisible until the end of your next turn. You become visible if you attack or cast a spell."
data "Properties" "IsHidden"

new entry "CloakOfShadows"
type "PassiveData"
data "DisplayName" "Cloak of Shadows"
data "Description" "You can use your Channel Divinity to vanish. As an action, you become invisible until the end of your next turn. You become visible if you attack or cast a spell."
data "Boosts" "UnlockSpell(Shout_CloakOfShadows)"

new entry "BeastSpells"
type "PassiveData"
data "DisplayName" "Beast Spells"
data "Description" "You can perform the somatic and verbal components of a druid spell while in a beast shape."
data "Icon" "PassiveFeature_Druid_BeastSpells"
data "Properties" "Highlighted"

new entry "Archdruid"
type "PassiveData"
data "DisplayName" "Archdruid"
data "Description" "You can use your Wild Shape an unlimited number of times. Additionally, you can ignore the verbal and somatic components of your druid spells. You gain this benefit in both your normal shape and your beast shape from Wild Shape."
data "Icon" "PassiveFeature_Druid_Archdruid"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpellVariant(SpellId('Shout_WildShape') | SpellId('Shout_WildShape_Combat') | SpellId('Shout_WildShape_Bear_Brown') | SpellId('Shout_WildShape_Combat_Bear_Brown') | SpellId('Shout_WildShape_Bear_Polar') | SpellId('Shout_WildShape_Combat_Bear_Polar') | SpellId('Shout_WildShape_Boar') | SpellId('Shout_WildShape_Combat_Boar') | SpellId('Shout_WildShape_Giant_Boar') | SpellId('Shout_WildShape_Combat_Giant_Boar') | SpellId('Shout_WildShape_Badger') | SpellId('Shout_WildShape_Combat_Badger') | SpellId('Shout_WildShape_Cat') | SpellId('Shout_WildShape_Combat_Cat') | SpellId('Shout_WildShape_Spider') | SpellId('Shout_WildShape_Combat_Spider') | SpellId('Shout_WildShape_Wolf') | SpellId('Shout_WildShape_Combat_Wolf') | SpellId('Shout_WildShape_Wolf_Dire') | SpellId('Shout_WildShape_Combat_Wolf_Dire') | SpellId('Shout_WildShape_DeepRothe') | SpellId('Shout_WildShape_Combat_DeepRothe') | SpellId('Shout_WildShape_Raven') | SpellId('Shout_WildShape_Combat_Raven') | SpellId('Shout_WildShape_Rat') | SpellId('Shout_WildShape_Combat_Rat') | SpellId('Shout_AberrantShape') | SpellId('Shout_WildShape_Fire_Elemental') | SpellId('Shout_WildShape_Earth_Elemental') | SpellId('Shout_WildShape_Air_Elemental') | SpellId('Shout_WildShape_Water_Elemental'),ModifyUseCosts(Replace,WildShape,0,0,WildShape),ModifyTooltipDescription());UnlockSpellVariant(HasSpellFlag(SpellFlags.Verbal) | HasSpellFlag(SpellFlags.Somatic) & (HasSpellFlag(SpellFlags.Spell) | NonSpellMetamagicAbilities()),ModifySpellFlags(Verbal,0),ModifySpellFlags(Somatic,0),ModifySpellFlags(Stealth,1),ModifyTooltipDescription())"

new entry "CircleofLandSpells_5th"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Target_SleetStorm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Target_Slow,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Target_SleetStorm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Shout_WaterWalk,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Target_ProtectionFromEnergy,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Target_CreateFoodAndWater,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Target_CallLightning,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Target_PlantGrowth,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "CircleofLandSpells_5th_2"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Target_Daylight,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Target_Haste,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Target_EruptingEarth,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Zone_LightningBolt,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Swamp',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_GaseousForm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_StinkingCloud,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "CircleofLandSpells_7th"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Target_IceStorm,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Target_SummonElemental,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Shout_FireShield,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Target_GreaterInvisibility,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Target_GraspingVine,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "CircleofLandSpells_7th_2"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Target_GraspingVine,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Target_Stoneskin,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Shout_GuardianOfNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Swamp',context.Source)):UnlockSpell(Target_FreedomOfMovement,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Swamp',context.Source)):UnlockSpell(Target_Blight,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_GreaterInvisibility,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_Blight,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "CircleofLandSpells_9th"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Arctic',context.Source)):UnlockSpell(Zone_ConeOfCold,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Target_FarStep,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Coast',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Target_WallOfStone,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Desert',context.Source)):UnlockSpell(Target_Contagion,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Forest',context.Source)):UnlockSpell(Target_Blight,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "CircleofLandSpells_9th_2"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Target_Contagion,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Grassland',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Target_WallOfStone,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Mountain',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Swamp',context.Source)):UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Swamp',context.Source)):UnlockSpell(Target_Cloudkill,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_Cloudkill,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);IF(HasPassive('Land_Underdark',context.Source)):UnlockSpell(Target_Contagion,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "LandsStride"
type "PassiveData"
data "DisplayName" "Land's Stride"
data "Description" "Moving through difficult terrain costs you no extra movement. You can also pass through plants without being slowed and without taking damage from them."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_LandsStride"
data "Boosts" "StatusImmunity(DIFFICULT_TERRAIN);StatusImmunity(DIFFICULT_TERRAIN_MUD);StatusImmunity(DIFFICULT_TERRAIN_WEB);StatusImmunity(DIFFICULT_TERRAIN_VINES);StatusImmunity(SPIKE_GROWTH)"

new entry "NaturesWard"
type "PassiveData"
data "DisplayName" "Nature's Ward"
data "Description" "You can't be charmed or frightened by elementals or fey, and you are immune to poison and disease."
data "Boosts" "StatusImmunity(SG_Poisoned);StatusImmunity(SG_Disease)"
data "Icon" "PassiveFeature_Druid_NaturesWard"
data "Properties" "Highlighted"
data "StatsFunctors" "IF(HasStatus('SG_Charmed') or HasStatus('SG_Frightened')):ApplyStatus(NATURES_WARD,100,0)"
data "StatsFunctorContext" "OnStatusApplied"

new entry "NaturesSanctuary"
type "PassiveData"
data "DisplayName" "Nature's Sanctuary"
data "Icon" "PassiveFeature_Druid_NaturesSanctuary"
data "Properties" "Highlighted"
data "Description" "When a beast or plant creature attacks you, that creature must make a Wisdom saving throw against your druid spell save DC. On a failed save, the creature must choose a different target, or the attack automatically misses. On a successful save, the creature is immune to this effect for 24 hours."
data "StatsFunctors" "IF(not HasStatus('NATURES_SANCTUARY',context.Source)):ApplyStatus(NATURES_SANCTUARY,100,-1)"
data "StatsFunctorContext" "OnEquip;OnCreate"

new entry "PrimalStrike"
type "PassiveData"
data "DisplayName" "Primal Strike"
data "Description" "Your attacks in beast form count as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage."

new entry "FastHands"
type "PassiveData"
data "DisplayName" "Fast Hands"
data "Description" "You can use the bonus action granted by Cunning Action to take the Help action."
data "Icon" "PassiveFeature_FastHands"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Throw_Throw_CunningAction);UnlockSpell(Target_Help_CunningAction)"

new entry "SecondStoryWork"
type "PassiveData"
data "DisplayName" "Second Story Work"
data "Description" "You gain resistance to Falling damage and you now use Dexterity to determine the distance you Jump."
data "Icon" "PassiveFeature_SecondStoryWork_Falling"
data "Properties" "Highlighted"
data "Boosts" "FallDamageMultiplier(0.5);UnlockSpell(Projectile_Jump_Thief)"

new entry "PactOfTheBlade"
type "PassiveData"
data "DisplayName" "Pact of the Blade"
data "Icon" "Skill_Warlock_PactOfTheBlade_BoundWeapon"
data "Properties" "Highlighted"
data "Description" "You can create a pact weapon, with its form being chosen when you create it. You are also proficienct with the weapon while you wield it."
data "Boosts" "UnlockSpell(Shout_PactOfTheBlade);UnlockSpell(Shout_PactOfTheBlade_Bind)"

new entry "PactOfTheTome"
type "PassiveData"
data "DisplayName" "Pact of the Tome"
data "Icon" "Skill_Warlock_SummonBookOfShadows"
data "Properties" "Highlighted"
data "Description" "Your patron gives you a grimoire called a Book of Shadows. When you gain this feature, choose three cantrips from any class's spell list. You can cast those cantrips at will."
data "Boosts" "IF(not HasStatus('BOOK_OF_SHADOWS_BLOCK',context.Source)):UnlockSpell(Shout_BookOfShadows);ActionResource(BookOfShadows,3,0)"
data "BoostContext" "OnStatusApplied;OnEquip;OnInventoryChanged;OnStatusRemoved;OnStatusApply;OnStatusRemove;OnMovedDistance;OnCreate"

new entry "DarkOnesOwnLuck"
type "PassiveData"
data "DisplayName" "Dark One's Own Luck"
data "Description" "You can call on your patron to alter fate in your favor. You can use this feature to add a d10 to your next ability check or saving throw."
data "ExtraDescription" "This feature cannot be used again until you finish a short or long rest."
data "Icon" "Skill_Warlock_DarkOnesOwnLuck"
data "EnabledConditions" "((not context.HasContextFlag(StatsFunctorContext.OnAttacked) and not context.HasContextFlag(StatsFunctorContext.OnStatusApplied)) and HasActionResource('DarkOnesOwnLuck', 1, 0, false, context.Source)) or ((context.HasContextFlag(StatsFunctorContext.OnAttacked) or context.HasContextFlag(StatsFunctorContext.OnStatusApplied)) and HasActionResource('DarkOnesOwnLuck', 1, 0, false))"
data "EnabledContext" "OnAbilityCheck;OnStatusApplied;OnAttacked;OnShortRest;OnLongRest"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and (HasStringInSpellRoll('SavingThrow') | HasStringInFunctorConditions('SavingThrow'))):UseActionResource(DarkOnesOwnLuck,1);IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and (HasStringInSpellRoll('SavingThrow') | HasStringInFunctorConditions('SavingThrow'))):UseActionResource(SELF,DarkOnesOwnLuck,1);IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and (HasStringInSpellRoll('SavingThrow') | HasStringInFunctorConditions('SavingThrow'))):ApplyStatus(DARK_ONES_OWN_LUCK_TECHNICAL,100,0);IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):UseActionResource(DarkOnesOwnLuck,1);IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):ApplyStatus(DARK_ONES_OWN_LUCK_TECHNICAL,100,0)"
data "Boosts" "RollBonus(SavingThrow,1d10);RollBonus(SkillCheck,1d10);RollBonus(RawAbility,1d10)"
data "StatsFunctorContext" "OnAbilityCheck;OnAttacked"

new entry "DarkOnesOwnLuck"
type "PassiveData"
data "DisplayName" "Dark One's Own Luck"
data "Description" "You can call on your patron to alter fate in your favor. You can use this feature to add a d10 to your next Ability Check or Saving throw. Once you do so, you cannot use this feature again until you finish a short or long rest."
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Icon" "Skill_Warlock_DarkOnesOwnLuck"
data "ToggleOnFunctors" "ApplyStatus(DARK_ONES_OWN_LUCK,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(DARK_ONES_OWN_LUCK)"
data "Boosts" "UnlockInterrupt(Interrupt_DarkOnesOwnLuck)"

new entry "DarkOnesOwnLuck_Ability"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "RollBonus(SkillCheck,1d4);RollBonus(RawAbility,1d4)"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):RemoveStatus(DARK_ONES_OWN_LUCK);IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck)):UseActionResource(DarkOnesOwnLuck,1,0)"
data "StatsFunctorContext" "OnAbilityCheck"

new entry "EntropicWard_Desc"
type "PassiveData"
data "DisplayName" "Entropic Ward"
data "Description" "Impose disadvantage against a creature's Attack Roll against you. If the attack misses, your next attack roll against the creature has Advantage if you make it before the end of your next turn."
data "Properties" "IsHidden"

new entry "EntropicWard"
type "PassiveData"
data "DisplayName" "Entropic Ward"
data "Description" "Impose disadvantage against a creature's Attack Roll against you. If the attack misses, your next Attack Roll against the creature has Advantage if you make it before the end of your next turn."
data "ExtraDescription" "This feature cannot be used again until you finish a short or long rest."
data "Icon" "Skill_Warlock_EntropicWard"
data "EnabledConditions" "((not context.HasContextFlag(StatsFunctorContext.OnAttacked) and not context.HasContextFlag(StatsFunctorContext.OnStatusApplied)) and HasActionResource('EntropicWard', 1, 0, false, context.Source)) or ((context.HasContextFlag(StatsFunctorContext.OnAttacked) or context.HasContextFlag(StatsFunctorContext.OnStatusApplied)) and HasActionResource('EntropicWard', 1, 0, false))"
data "EnabledContext" "OnStatusApplied;OnAttacked;OnShortRest;OnLongRest"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and not IsMiss()):ApplyStatus(ENTROPIC_WARD_TECHNICAL,100,0);IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and IsMiss()):ApplyStatus(ENTROPIC_WARD_TECHNICAL_2,100,0);IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and IsMiss()):ApplyStatus(SELF,ENTROPIC_WARD_TARGET,100,2);IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and IsAttack()):UseActionResource(EntropicWard,1,0)"
data "Boosts" "Disadvantage(AttackTarget)"
data "StatsFunctorContext" "OnAttacked"

new entry "AspectOfTheMoon"
type "PassiveData"
data "DisplayName" "Aspect of the Moon"
data "Description" "You no longer need to sleep and can't be forced to sleep by any means. This invocation requires the Pact of the Tome boon."
data "Boosts" "IF(HasPactOfTheTome()):StatusImmunity(SLEEP)"

new entry "BookOfAncientSecrets"
type "PassiveData"
data "DisplayName" "Book of Ancient Secrets"
data "Description" "You can inscribe magical rituals in your Book of Shadows."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_BookOfAncientSecrets"
data "Boosts" "IF(not HasStatus('BOOK_OF_ANCIENT_SECRETS_BLOCK',context.Source) and HasPactOfTheTome()):UnlockSpell(Shout_BookOfAncientSecrets_Inscribe);ActionResource(BookOfAncientSecrets,2,0);IF(HasPactOfTheTome()):UnlockSpell(Shout_BookOfAncientSecrets)"

new entry "CloakOfFlies"
type "PassiveData"
data "DisplayName" "Cloak of Flies"
data "Description" "Gain the ability to surround yourself with a magical aura that extends [1] from you. The aura grants you Advantage on Intimidation checks but disadvantage on all other Charisma checks. Creatures that start their turn in the aura take Poison damage equal to your Charisma modifier."
data "DescriptionParams" "Distance(2)"
data "Icon" "Skill_Warlock_CloakOfFlies"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_CloakOfFlies)"

new entry "DevilsSight"
type "PassiveData"
data "DisplayName" "Shared_Passive_DevilsSight_DisplayName"
data "Description" "Shared_Passive_DevilsSight_Description"
data "DescriptionParams" "Distance(24)"
data "Icon" "Spell_Evocation_Darkvision"
data "Properties" "Highlighted"
data "Boosts" "DarkvisionRangeMin(24);ActiveCharacterLight(e278f6a0-26d7-49be-b11a-9b84bc313c3c);StatusImmunity(BLINDED_DARKNESS);StatusImmunity(BLINDED_DARKNESS_SELF)"

new entry "EldritchMind"
type "PassiveData"
data "DisplayName" "Eldritch Mind"
data "Description" "You have Advantage on Constitution Saving Throws that you make to maintain your concentration on a spell."
data "Boosts" "IF(IsConcentrating(context.Source)):Advantage(SavingThrow,Constitution)"

new entry "EldritchSmite"
type "PassiveData"
data "DisplayName" "Eldritch Smite"
data "Description" "Once per turn when you hit a creature with your pact weapon, you can expend a warlock spell slot to deal an extra [1] to the target, plus another [1] per level of the spell slot and you can knock the target prone if it is Huge or smaller."
data "Icon" "Skill_Warlock_EldritchSmite"
data "Properties" "Highlighted"
data "DescriptionParams" "DealDamage(1d8,Force)"
data "Boosts" "IF(HasPassive('PactOfTheBlade',context.Source)):UnlockSpell(Shout_EldritchSmite,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a);IF(HasPassive('PactOfTheBlade',context.Source)):UnlockSpell(Shout_EldritchSmite_Critical,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a)"

new entry "EldritchSpear"
type "PassiveData"
data "DisplayName" "Eldritch Spear"
data "Description" "When you cast Eldritch Blast, its range is increased to [1]."
data "DescriptionParams" "Distance(90)"
data "Boosts" "UnlockSpellVariant(SpellId('Projectile_EldritchBlast'),ModifyTargetRadius(Override,90))"

new entry "GiftOfTheEverLivingOnes"
type "PassiveData"
data "DisplayName" "Gift of the Ever-Living Ones"
data "Description" "Whenever you regain hit points while your familiar is within [1] of you, treat any dice rolled to determine the hit points you regain as having rolled their maximum value."
data "DescriptionParams" "Distance(30)"
data "Icon" "Skill_Warlock_GiftOfTheEverLivingOnes"
data "Properties" "Highlighted"

new entry "GraspOfHadar"
type "PassiveData"
data "DisplayName" "Grasp of Hadar"
data "Description" "Once on each of your turns when you hit a creature with your Eldritch Blast, you can move that creature [1] closer to yourself."
data "DescriptionParams" "Distance(3)"
data "Icon" "Skill_Warlock_GraspOfHadar"
data "Conditions" "SpellId('Projectile_EldritchBlast') and HasDamageEffectFlag(DamageFlags.Hit) and Character()"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;OncePerTurn;Highlighted"
data "StatsFunctors" "Force(-3)"
data "StatsFunctorContext" "OnAttack"

new entry "LanceOfLethargy"
type "PassiveData"
data "DisplayName" "Lance of Lethargy"
data "Description" "Once on each of your turns when you hit a creature with your Eldritch Blast, you can reduce that creature's speed by [1] until the end of your next turn."
data "DescriptionParams" "Distance(3)"
data "Properties" "OncePerTurn"
data "Conditions" "SpellId('Projectile_EldritchBlast') and HasDamageEffectFlag(DamageFlags.Hit) and Character()"
data "StatsFunctors" "ApplyStatus(LANCE_OF_LETHARGY,100,2)"
data "StatsFunctorContext" "OnAttack"

new entry "MaddeningHex"
type "PassiveData"
data "DisplayName" "Maddening Hex"
data "Description" "Cause a psychic disturbance around the target cursed by your Hex spell or by a warlock feature of yours. When you do so, you deal psychic damage to the cursed target and each hostile creature within [1] of it."
data "DescriptionParams" "Distance(2)"
data "Icon" "Skill_Warlock_MaddeningHex"
data "Properties" "OncePerTurn;Highlighted"
data "Boosts" "UnlockSpell(Target_MaddeningHex,,,,Charisma)"

new entry "MireTheMind"
type "PassiveData"
data "DisplayName" "Mire the Mind"
data "Description" "Once per Long Rest, you can cast Slow using a Warlock Spell Slot."
data "ExtraDescription" "Slow halves the target's Speed, reduces AC and Dexterity Saving Throws by -2, prevents Reactions and allows only one Attack per turn."
data "Icon" "Spell_Transmutation_Slow"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_Slow,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a,UntilRest,Charisma)"

new entry "OneWithShadows"
type "PassiveData"
data "DisplayName" "One with Shadows"
data "Description" "When you are in an area of dim light or darkness, you can use your action to become invisible until you move or take an Action or a Reaction."
data "Icon" "Skill_Warlock_OneWithShadows"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_OneWithShadows)"

new entry "RebukeOfTheTailsman"
type "PassiveData"
data "DisplayName" "Rebuke of the Tailsman"
data "Description" "Deal damage to an attacker within [1] that hits the wearer of your tailsman."
data "ExtraDescription" "This is a Reaction."
data "DescriptionParams" "Distance(9)"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar"
data "ToggleOnFunctors" "ApplyStatus(REBUKE_OF_THE_TAILSMAN,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(REBUKE_OF_THE_TAILSMAN)"

new entry "ThristingBlade"
type "PassiveData"
using "ExtraAttack"
data "DisplayName" "Thirsting Blade"
data "Description" "You can attack with your pact weapon twice, instead of once, whenever you take the Attack action on your turn."
data "Conditions" "IsWeaponAttack() and not HasSpellFlag(SpellFlags.Spell) and HasUseCosts('ActionPoint', true) and HasPassive('PactOfTheBlade',context.Source) and (HasStatus('PACT_OF_THE_BLADE',GetAttackWeapon()) or HasStatus('BOUND_WEAPON',GetAttackWeapon())) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"

new entry "TombOfLevistus"
type "PassiveData"
data "DisplayName" "Tomb of Levistus"
data "Description" "Entomb yourself in ice when you take damage until the end of your next turn. After taking damage, you vulnerability to fire, your movement is reduced to 0 and are become Incapacitated. Once you use this feature, you cannot do so again until you finish a short or long rest."
data "DescriptionParams" "GainTemporaryHitPoints(10*Level)"
data "Icon" "Skill_Warlock_TombOfLevistus"
data "Boosts" "UnlockInterrupt(Interrupt_TombOfLevistus)"

new entry "UndyingServitude"
type "PassiveData"
data "DisplayName" "Undying Servitude"
data "Description" "Once per Long Rest, you can cast Animate Dead without using a Warlock Spell Slot."
data "ExtraDescription" "Animate Dead summons a skeleton or zombie from a dead creature as an ally."
data "Icon" "Spell_Necromancy_AnimateDead"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_AnimateDead,MostPowerful,,UntilRest,Charisma)"

new entry "Multiattack_Shadowspawn"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The shadowspawn makes a number of attacks equal to spell's level used to summon it."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_ChillingHand') and HasUseCosts('ActionPoint', true) and not HasStatus('MULTIATTACK_SHADOWSPAWN_2',context.Source) and not HasStatus('MULTIATTACK_SHADOWSPAWN_3',context.Source) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_SHADOWSPAWN,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Shadowspawn_2"
type "PassiveData"
data "DisplayName" "Multiattack"
using "Multiattack_Shadowspawn"

new entry "Multiattack_Shadowspawn_3"
type "PassiveData"
data "DisplayName" "Multiattack"
using "Multiattack_Shadowspawn"

new entry "PotentCantrip"
type "PassiveData"
data "DisplayName" "Potent Cantrip"
data "Description" "Your damaging cantrips affect even creatures that avoid the brunt of the effect. When a creature succeeds on a saving throw against your cantrip, the creature takes half the cantrip's damage (if any) but suffers no additional effect from the cantrip."

new entry "TelepathicLink"
type "PassiveData"
data "DisplayName" "Telepathic Link"
data "Icon" "Skill_Warlock_AwakenedMind"
data "Description" "Toggle off to remove the telepathic link between yourself and the source."
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn"
data "ToggleOffFunctors" "RemoveStatus(SELF,AWAKENED_MIND)"

new entry "ArcaneWard"
type "PassiveData"
data "DisplayName" "Shared_Passive_ArcaneWard_DisplayName"
data "Description" "Shared_Passive_ArcaneWard_Description"
data "DescriptionParams" "RegainHitPoints(2*Level+IntelligenceModifier)"
data "Icon" "PassiveFeature_ArcaneWard"
data "Properties" "Highlighted"
data "PriorityOrder" "2"
data "Conditions" "IsSpellSchool(SpellSchool.Abjuration) and not IsCantrip()"
data "StatsFunctors" "IF(SpellPowerLevelEqualTo(1) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN,100,-1);IF(SpellPowerLevelEqualTo(2) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_2,100,-1);IF(SpellPowerLevelEqualTo(3) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_3,100,-1);IF(SpellPowerLevelEqualTo(4) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_4,100,-1);IF(SpellPowerLevelEqualTo(5) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_5,100,-1);IF(SpellPowerLevelEqualTo(6) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_6,100,-1);IF(SpellPowerLevelEqualTo(7) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_7,100,-1);IF(SpellPowerLevelEqualTo(8) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_8,100,-1);IF(SpellPowerLevelEqualTo(9) and HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_REGEN_9,100,-1);IF(not HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD,100,-1);IF(not HasStatus('ARCANE_WARD_TECHNICAL',context.Source)):ApplyStatus(SELF,ARCANE_WARD_TECHNICAL,100,-1)"
data "StatsFunctorContext" "OnAttack"

new entry "ProjectedWard"
type "PassiveData"
data "DisplayName" "Projected Ward"
data "Description" "Your Arcane Ward absorbs the damage a creature within [1] takes. If the Arcane Ward is reduced to 0 hit points, the warded creature takes the remaining damage."
data "ExtraDescription" "Shared_Passive_AttackOfOpportunity_ExtraDescription"
data "DescriptionParams" "Distance(9)"
data "Icon" "Skill_Wizard_ProjectedWard"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(PROJECTED_WARD_TOGGLE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(PROJECTED_WARD);RemoveStatus(PROJECTED_WARD_TOGGLE)"

new entry "ProjectedWard"
type "PassiveData"
data "DisplayName" "Projected Ward"
data "Description" "Your Arcane Ward absorbs the damage a creature within [1] takes. If the Arcane Ward is reduced to 0 hit points, the warded creature takes the remaining damage."
data "DescriptionParams" "Distance(9)"
data "Icon" "Skill_Wizard_ProjectedWard"
data "Boosts" "UnlockInterrupt(Interrupt_ProjectedWard)"

new entry "SneakAttack"
type "PassiveData"
data "DisplayName" "Sneak Attack"
data "Description" "Once per turn, you deal extra [1] when you attack with advantage or target someone with one of your allies nearby."
data "DescriptionParams" "DealDamage(LevelMapValue(SneakAttack),MainMeleeWeaponDamageType)"
data "Icon" "Action_SneakAttack_Melee"
data "Conditions" "((IsAttackType(AttackType.RangedWeaponAttack)) or (IsAttackType(AttackType.MeleeWeaponAttack) and WieldingWeapon('Finesse', false, false, context.Source)) or (IsAttackType(AttackType.MeleeOffHandWeaponAttack) and WieldingWeapon('Finesse', true, false, context.Source))) and (HasAdvantage() or HasAllyWithinRange('SG_Incapacitated',3)) and not HasDisadvantage() and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('SneakAttack',1,0,false,context.Source) and not IsKillingBlow()"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "UseActionResource(SELF,SneakAttack,1);IF(IsAttackType(AttackType.MeleeWeaponAttack) and not CharacterLevelGreaterThan(16)):DealDamage(LevelMapValue(SneakAttack), MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack) and not CharacterLevelGreaterThan(16)):DealDamage(LevelMapValue(SneakAttack), MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack) and not CharacterLevelGreaterThan(16)):DealDamage(LevelMapValue(SneakAttack), OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack) and not CharacterLevelGreaterThan(16)):DealDamage(LevelMapValue(SneakAttack), OffhandRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeWeaponAttack) and CharacterLevelGreaterThan(16) and not CharacterLevelGreaterThan(18)):DealDamage(9d10, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack) and CharacterLevelGreaterThan(16) and not CharacterLevelGreaterThan(18)):DealDamage(9d10, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack) and CharacterLevelGreaterThan(16) and not CharacterLevelGreaterThan(18)):DealDamage(9d10, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack) and CharacterLevelGreaterThan(16) and not CharacterLevelGreaterThan(18)):DealDamage(9d10, OffhandRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeWeaponAttack) and CharacterLevelGreaterThan(18)):DealDamage(10d10, MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack) and CharacterLevelGreaterThan(18)):DealDamage(10d10, MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack) and CharacterLevelGreaterThan(18)):DealDamage(10d10, OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack) and CharacterLevelGreaterThan(18)):DealDamage(10d10, OffhandRangedWeaponDamageType)"
data "StatsFunctorContext" "OnAttack"
data "TooltipUseCosts" "SneakAttack:1"

new entry "SneakAttack"
type "PassiveData"
data "DisplayName" "Sneak Attack"
data "Description" "Once per turn, you deal extra [1] when you attack with advantage or target someone with one of your allies nearby."
data "DescriptionParams" "DealDamage(LevelMapValue(SneakAttack),MainMeleeWeaponDamageType)"
data "Icon" "Action_SneakAttack_Melee"
data "Boosts" "UnlockInterrupt(Interrupt_SneakAttack)"

new entry "SneakAttack_Dagger"
type "PassiveData"
data "Properties" "IsHidden"
data "DisplayName" "Sneak Attack"
data "Boosts" "UnlockSpell(Throw_Throw_Dagger)"
data "StatsFunctorContext" "OnProjectileExploded"
data "Conditions" "SpellId('Throw_Throw_Dagger')"
data "StatsFunctors" "PROJECTILE:CreateExplosion(Projectile_SneakAttack_Explosion)"

new entry "FeralInstinct"
type "PassiveData"
data "DisplayName" "Feral Instinct"
data "Description" "You have a +5 bonus on Initiative rolls and are immune to being surprised if you enter your rage."
data "Icon" "PassiveFeature_Barbarian_FeralInstinct"
data "Properties" "Highlighted"
data "Boosts" "Initiative(5);IF(HasStatus('SG_Rage',context.Source)):StatusImmunity(SURPRISED)"

new entry "BrutalCritical"
type "PassiveData"
data "DisplayName" "Brutal Critical"
data "Description" "You can roll one additional weapon damage die when determining the extra damage for a critical hit with a melee attack. This increases to two additional dice at 13th level and three additional dice at 17th level."
data "Icon" "PassiveFeature_Barbarian_BrutalCritical"
data "Properties" "Highlighted"
data "Conditions" "IsMeleeAttack() and IsCritical() and ConditionResult(context.Source.Level > 8) and ConditionResult(context.Source.Level < 13)"
data "StatsFunctors" "IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|LightHammers|Sickles', GetActiveWeapon())):CreateExplosion(Projectile_D4);IF(IsWeaponOfProficiencyGroup('Greatswords|Handaxes|Javelins|Maces|Mauls|Scimitars', GetActiveWeapon())):CreateExplosion(Projectile_D6);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_D6);IF(IsWeaponOfProficiencyGroup('Flails|Greatclubs|Morningstars|Quarterstaffs|Rapiers|Warpicks', GetActiveWeapon())):CreateExplosion(Projectile_D8);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_D8);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_D8);IF(IsWeaponOfProficiencyGroup('Glaives|Halberds|Pikes', GetActiveWeapon())):CreateExplosion(Projectile_D10);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_D10);IF(IsWeaponOfProficiencyGroup('Greataxes', GetActiveWeapon())):CreateExplosion(Projectile_D12)"
data "StatsFunctorContext" "OnAttack"

new entry "BrutalCritical_2"
type "PassiveData"
data "DisplayName" "Brutal Critical"
using "BrutalCritical"
data "Conditions" "IsMeleeAttack() and IsCritical() and ConditionResult(context.Source.Level > 12) and ConditionResult(context.Source.Level < 17)"
data "StatsFunctors" "IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|LightHammers|Sickles', GetActiveWeapon())):CreateExplosion(Projectile_2D4);IF(IsWeaponOfProficiencyGroup('Greatswords|Handaxes|Javelins|Maces|Mauls|Scimitars', GetActiveWeapon())):CreateExplosion(Projectile_2D6);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_2D6);IF(IsWeaponOfProficiencyGroup('Flails|Greatclubs|Morningstars|Quarterstaffs|Rapiers|Warpicks', GetActiveWeapon())):CreateExplosion(Projectile_2D8);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_2D8);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_2D8);IF(IsWeaponOfProficiencyGroup('Glaives|Halberds|Pikes', GetActiveWeapon())):CreateExplosion(Projectile_2D10);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_2D10);IF(IsWeaponOfProficiencyGroup('Greataxes', GetActiveWeapon())):CreateExplosion(Projectile_2D12)"

new entry "BrutalCritical_3"
type "PassiveData"
data "DisplayName" "Brutal Critical"
using "BrutalCritical"
data "Conditions" "IsMeleeAttack() and IsCritical() and ConditionResult(context.Source.Level > 16)"
data "StatsFunctors" "IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|LightHammers|Sickles', GetActiveWeapon())):CreateExplosion(Projectile_3D4);IF(IsWeaponOfProficiencyGroup('Greatswords|Handaxes|Javelins|Maces|Mauls|Scimitars', GetActiveWeapon())):CreateExplosion(Projectile_3D6);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_3D6);IF(IsWeaponOfProficiencyGroup('Flails|Greatclubs|Morningstars|Quarterstaffs|Rapiers|Warpicks', GetActiveWeapon())):CreateExplosion(Projectile_3D8);IF(IsWeaponOfProficiencyGroup('Spears|Tridents', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_3D8);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and NonVersatile()):CreateExplosion(Projectile_NonVer_3D8);IF(IsWeaponOfProficiencyGroup('Glaives|Halberds|Pikes', GetActiveWeapon())):CreateExplosion(Projectile_3D10);IF(IsWeaponOfProficiencyGroup('Battleaxes|Longswords|Warhammers', GetActiveWeapon()) and Versatile()):CreateExplosion(Projectile_Ver_3D10);IF(IsWeaponOfProficiencyGroup('Greataxes', GetActiveWeapon())):CreateExplosion(Projectile_3D12)"

new entry "RelentlessRage"
type "PassiveData"
data "DisplayName" "Relentless Rage"
data "Description" "If you drop to 0 hit points while you're raging and don't die outright, you can make a DC 10 Constitution saving throw. If you succeed, you drop to 1 hit point instead. Each time you use this feature after the first, the DC increases by 5. When you finish a short or long rest, the DC resets to 10."
data "Conditions" "HasHPLessThan(1) and HasStatus('SG_Rage')"
data "Icon" "PassiveFeature_Barbarian_RelentlessRage"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn;Highlighted"
data "StatsFunctors" "IF(HasStatus('RELENTLESS_RAGE_4') and SavingThrow(Ability.Constitution,30)):CreateExplosion(Projectile_RelentlessRage_Heal);IF(HasStatus('RELENTLESS_RAGE_3') and SavingThrow(Ability.Constitution,25)):CreateExplosion(Projectile_RelentlessRage_Heal);IF(HasStatus('RELENTLESS_RAGE_2') and SavingThrow(Ability.Constitution,20)):CreateExplosion(Projectile_RelentlessRage_Heal);IF(HasStatus('RELENTLESS_RAGE_1') and SavingThrow(Ability.Constitution,15)):CreateExplosion(Projectile_RelentlessRage_Heal);IF(not HasStatus('RELENTLESS_RAGE_1') and not HasStatus('RELENTLESS_RAGE_2') and not HasStatus('RELENTLESS_RAGE_3') and not HasStatus('RELENTLESS_RAGE_4') and SavingThrow(Ability.Constitution,10)):CreateExplosion(Projectile_RelentlessRage_Heal);ApplyStatus(RELENTLESS_RAGE_PROC,100,0)"
data "StatsFunctorContext" "OnDamaged"

new entry "RelentlessRage_Removal"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "RemoveStatus(RELENTLESS_RAGE_1);RemoveStatus(RELENTLESS_RAGE_2);RemoveStatus(RELENTLESS_RAGE_3);RemoveStatus(RELENTLESS_RAGE_4)"
data "StatsFunctorContext" "OnShortRest"

new entry "PersistentRage"
type "PassiveData"
data "DisplayName" "Persistent Rage"
data "Description" "Your rage is so fierce that it ends early only if you fall unconscious or if you choose to end it."
data "Icon" "PassiveFeature_Barbarian_PersistentRage"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(RAGE_STOP_REMOVE,100,-1)"
data "StatsFunctorContext" "OnTurn"

new entry "IndominableMight"
type "PassiveData"
data "DisplayName" "Indominable Might"
data "Description" "You gain a +10 bonus on Strength checks."
data "Icon" "PassiveFeature_Barbarian_IndominableMight"
data "Properties" "Highlighted"
data "Boosts" "RollBonus(RawAbility,10,Strength);Skill(Athletics, 10)"

new entry "PrimalChampion"
type "PassiveData"
data "DisplayName" "Primal Champion"
data "Description" "Your Strength and Constitution scores increase by 4. Your maximum for those scores is now 24."
data "Icon" "PassiveFeature_Barbarian_PrimalChampion"
data "Properties" "Highlighted"
data "Boosts" "Ability(Strength,4);Ability(Constitution,4)"

new entry "AspectOfTheBeast"
type "PassiveData"
data "DisplayName" "Aspect of the Beast"
data "Description" "You gain a magical benefit based on the totem animal of your choice. You can choose the same animal you selected at 3rd level or a different one."

new entry "AspectOfTheBeast_Bear"
type "PassiveData"
data "DisplayName" "Aspect of the Bear"
data "Description" "Your carrying capacity is doubled."
data "Icon" "Action_Barbarian_Rage_BearTotem"
data "Properties" "Highlighted"
data "Boosts" "CarryCapacityMultiplier(2.0)"

new entry "AspectOfTheBeast_Eagle"
type "PassiveData"
data "DisplayName" "Aspect of the Eagle"
data "Description" "You gain advantage on Perception checks."
data "Icon" "Action_Barbarian_Rage_EagleTotem"
data "Properties" "Highlighted"
data "Boosts" "Advantage(Skill,Perception)"

new entry "AspectOfTheBeast_Elk"
type "PassiveData"
data "DisplayName" "Aspect of the Elk"
data "Description" "The speed you move at through difficult terrain isn't slowed."
data "Icon" "Action_Barbarian_Rage_ElkTotem"
data "Properties" "Highlighted"
data "Boosts" "IF(HasStatus('DIFFICULT_TERRAIN',context.Source) or HasStatus('DIFFICULT_TERRAIN_WEB',context.Source) or HasStatus('DIFFICULT_TERRAIN_MUD',context.Source) or HasStatus('DIFFICULT_TERRAIN_VINES',context.Source) or HasStatus('DIFFICULT_TERRAIN_OVERGROWTH',context.Source) or HasStatus('DIFFICULT_TERRAIN_LAVA',context.Source)):MovementSpeedLimit(Run)"

new entry "AspectOfTheBeast_Tiger"
type "PassiveData"
data "DisplayName" "Aspect of the Tiger"
data "Description" "You gain proficiency in two skills from the following list: Athletics, Acrobatics, Stealth, and Survival."
data "Icon" "Action_Barbarian_Rage_TigerTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_TigerSpirit_Proficiencies)"

new entry "AspectOfTheBeast_Wolf"
type "PassiveData"
data "DisplayName" "Aspect of the Wolf"
data "Description" "You can move stealthily while traveling at a normal pace."
data "Icon" "Action_Barbarian_Rage_WolfTotem"
data "Properties" "Highlighted"

new entry "SpiritWalker"
type "PassiveData"
data "DisplayName" "Spirit Walker"
data "Description" "You can cast the Commune with Nature spell, but only as a ritual."
data "Icon" "PassiveFeature_Barbarian_SpiritWalker"
data "Boosts" "UnlockSpell(Shout_CommuneWithNature_Ritual)"

new entry "TotemicAttunement"
type "PassiveData"
data "DisplayName" "Totemic Attunement"
data "Description" "You gain a magical benefit based on the totem animal of your choice. You can choose the same animal you selected previously or a different one."

new entry "TotemicAttunement_Bear"
type "PassiveData"
data "DisplayName" "Totemic Attunement: Bear"
data "Description" "While raging, any hostile creature within [1] of you has Disadvantage on Attack Rolls against targets other than you. Creatures unable to see or hear you or unable to be Frightened are immune to this effect."
data "DescriptionParams" "Distance(2)"
data "Icon" "Action_Barbarian_Rage_BearTotem"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(TOTEMIC_ATTUNEMENT_AURA,100,-1)"

new entry "TotemicAttunement_Eagle"
type "PassiveData"
data "DisplayName" "Totemic Attunement: Eagle"
data "Description" "While raging, you have a flying speed equal to your current walking speed."
data "Icon" "Action_Barbarian_Rage_EagleTotem"
data "Properties" "Highlighted"
data "Boosts" "IF(HasStatus('SG_Rage',context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle);IF(HasActionResource('Movement',2,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_2);IF(HasActionResource('Movement',3,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_3);IF(HasActionResource('Movement',5,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_5);IF(HasActionResource('Movement',6,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_6);IF(HasActionResource('Movement',7,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_7);IF(HasActionResource('Movement',8,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_8);IF(HasActionResource('Movement',9,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_9);IF(HasActionResource('Movement',10,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_10);IF(HasActionResource('Movement',11,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_11);IF(HasActionResource('Movement',12,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_12);IF(HasActionResource('Movement',13,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_13);IF(HasActionResource('Movement',14,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_14);IF(HasActionResource('Movement',15,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_15);IF(HasActionResource('Movement',16,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_16);IF(HasActionResource('Movement',17,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_17);IF(HasActionResource('Movement',18,0,false,context.Source)):UnlockSpell(Projectile_TotemicAttunement_Eagle_18)"

new entry "TotemicAttunement_Elk"
type "PassiveData"
data "DisplayName" "Totemic Attunement: Elk"
data "Description" "While raging, you can use a bonus action to pass through the space of a Large or smaller creature."
data "Icon" "Action_Barbarian_Rage_ElkTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Rush_TotemicAttunement_Elk)"

new entry "TotemicAttunement_Tiger"
type "PassiveData"
data "DisplayName" "Totemic Attunement: Tiger"
data "Description" "While raging, if you move toward a Large or smaller target before making a melee weapon attack against it, you can use a bonus action to make an additional melee weapon attack against it."
data "Icon" "Action_Barbarian_Rage_TigerTotem"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Projectile_TotemicAttunement_Tiger)"
data "Conditions" "HasStatus('TOTEMIC_ATTUNEMENT_TIGER',context.Source) and IsMeleeWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit) and TargetSizeEqualOrSmaller(Size.Large)"
data "StatsFunctors" "ApplyStatus(TOTEMIC_ATTUNEMENT_TIGER_TECHNICAL,100,1);ApplyStatus(SELF,TOTEMIC_ATTUNEMENT_TIGER_BONUS,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "TotemicAttunement_Wolf"
type "PassiveData"
data "DisplayName" "Totemic Attunement: Wolf"
data "Description" "While raging, you can use a bonus action to knock a Large or smaller creature prone when you hit it with melee weapon attack."
data "Icon" "Action_Barbarian_Rage_WolfTotem"
data "Properties" "Highlighted"
data "Conditions" "HasStatus('SG_Rage',context.Source) and IsMeleeWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit) and TargetSizeEqualOrSmaller(Size.Large)"
data "StatsFunctors" "ApplyStatus(SELF,TOTEMIC_ATTUNEMENT_WOLF,100,1);ApplyStatus(TOTEMIC_ATTUNEMENT_WOLF_TECHNICAL,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "MindlessRage"
type "PassiveData"
data "DisplayName" "Mindless Rage"
data "Description" "You can't be Charmed or Frightened while raging."
data "Icon" "Action_Barbarian_Rage"
data "Properties" "Highlighted"
data "Boosts" "IF(HasStatus('SG_Rage',context.Source)):StatusImmunity(SG_Charmed);IF(HasStatus('SG_Rage',context.Source)):StatusImmunity(SG_Frightened)"

new entry "IntimidatingPresence"
type "PassiveData"
data "DisplayName" "Intimidating Presence"
data "Description" "You can frighten someone with your menacing presence."
data "Icon" "Action_Barbarian_IntimidatingPresence"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_IntimidatingPresence)"

new entry "Retaliation"
type "PassiveData"
data "DisplayName" "Retaliation"
data "Description" "When you take damage from a creature that is within [1] of you, you can use your reaction to make a melee weapon attack against that creature."
data "DescriptionParams" "Distance(2)"
data "Icon" "PassiveFeature_Barbarian_Retaliation"
data "Conditions" "HasActionResource('ReactionActionPoint', 1, 0, false, context.Source) and not WieldingWeapon('Ammunition', false, false, context.Source) and not HasStatus('SG_Incapacitated', context.Source) and not HasStatus('SG_Unconscious', context.Source) and not DistanceToTargetGreaterThan(3.0)"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctors" "UseActionResource(ReactionActionPoint,1);UseAttack(SWAP)"
data "StatsFunctorContext" "OnDamaged"
data "TooltipUseCosts" "ReactionActionPoint:1"

new entry "WeaponBond_Desc"
type "PassiveData"
data "DisplayName" "Weapon Bond"
data "Description" "You learn a ritual that creates a magical bond between yourself and one weapon."
data "Properties" "IsHidden"

new entry "WeaponBond"
type "PassiveData"
data "DisplayName" "Weapon Bond"
data "Description" "You learn a ritual that creates a magical bond between yourself and one weapon."
data "Icon" "Action_WeaponBond"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_WeaponBond)"

new entry "StrengthBeforeDeath"
type "PassiveData"
data "DisplayName" "Strength Before Death"
data "Description" "Your fighting spirit can delay the grasp of death, causing you to stand back up when taken reduces to you 0 hit points. When the extra turn ends, you fall unconscious if you still have 0 hit points."
data "ExtraDescription" "This is a Reaction. This feature cannot be used again until you finish a long rest."
data "Icon" "PassiveFeature_StrengthBeforeDeath"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Boosts" "IF(not HasStatus('STRENGTH_BEFORE_DEATH_BLOCK',context.Source)):DownedStatus(STRENGTH_BEFORE_DEATH_DOWNED)"
data "Conditions" "HasHPLessThan(1) and HasActionResource('ReactionActionPoint',1,0,false) and not HasStatus('STRENGTH_BEFORE_DEATH_BLOCK')"
data "StatsFunctors" "UseActionResource(ReactionActionPoint,1,0)"
data "StatsFunctorContext" "OnDamaged"
data "TooltipUseCosts" "ReactionActionPoint:1"

new entry "StrengthBeforeDeath_Heal"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "RemoveStatus(STRENGTH_BEFORE_DEATH_TECHNICAL)"
data "StatsFunctorContext" "OnHealed"

new entry "Relentless_Boar"
type "PassiveData"
data "DisplayName" "Relentless"
data "Description" "If 7 damage or less is taken that would reduce hit points to 0, hit points are reduced to 1 instead."
data "Icon" "Action_Ranger_RangersCompanion_Boar"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;OncePerShortRest;Highlighted"
data "Conditions" "ConditionResult(context.HitDescription.TotalDamageDone < 8) and HasHPLessThan(1)"
data "StatsFunctors" "RegainHitPoints(SELF,1)"
data "StatsFunctorContext" "OnDamage"

new entry "Relentless_Giant_Boar"
type "PassiveData"
data "DisplayName" "Relentless"
data "Description" "If 10 damage or less is taken that would reduce hit points to 0, hit points are reduced to 1 instead."
data "Icon" "Action_Ranger_RangersCompanion_Boar"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;OncePerShortRest;Highlighted"
data "Conditions" "ConditionResult(context.HitDescription.TotalDamageDone < 11) and HasHPLessThan(1)"
data "StatsFunctors" "RegainHitPoints(SELF,1)"
data "StatsFunctorContext" "OnDamage"

new entry "BardicInspirationResource"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6)"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnEquip;OnInventoryChanged"

new entry "BardicInspirationResource_2"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8)"

new entry "BardicInspirationResource_3"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10)"

new entry "BardicInspirationResource_4"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('BardicInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12)"

new entry "CombatInspirationResource"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level < 5)):ActionResource(BardicInspiration,1,0,d6)"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnEquip;OnInventoryChanged"

new entry "CombatInspirationResource_2"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 4)):ActionResource(BardicInspiration,1,0,d8)"

new entry "CombatInspirationResource_3"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 9)):ActionResource(BardicInspiration,1,0,d10)"

new entry "CombatInspirationResource_4"
type "PassiveData"
using "BardicInspirationResource"
data "Boosts" "IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 11) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 13) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 15) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 17) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 19) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 21) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 23) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 25) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 27) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12);IF(HasPassive('CombatInspiration',context.Source) and ConditionResult(context.Source.Charisma > 29) and ConditionResult(context.Source.Level > 14)):ActionResource(BardicInspiration,1,0,d12)"

new entry "FontOfInspiration"
type "PassiveData"
data "DisplayName" "Font of Inspiration"
data "Description" "You regain all of your expended uses of Bardic Inspiration when you finish a short or long rest."
data "StatsFunctors" "RestoreResource(BardicInspiration, 100%, 0, d6);RestoreResource(BardicInspiration, 100%, 0, d8);RestoreResource(BardicInspiration, 100%, 0, d10);RestoreResource(BardicInspiration, 100%, 0, d12);RestoreResource(CombatInspiration, 100%, 0, d6);RestoreResource(CombatInspiration, 100%, 0, d8);RestoreResource(CombatInspiration, 100%, 0, d10);RestoreResource(CombatInspiration, 100%, 0, d12)"
data "StatsFunctorContext" "OnShortRest"

new entry "CompanionsBond_ASI"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_ASI)"

new entry "CompanionsBond_ASI_2"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_ASI_8th)"

new entry "CompanionsBond_ASI_3"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_ASI_12th)"

new entry "CompanionsBond_ASI_4"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_ASI_16th)"

new entry "CompanionsBond_ASI_5"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "UnlockSpell(Target_ASI_19th)"

new entry "BeastsDefense"
type "PassiveData"
data "DisplayName" "Beast's Defense"
data "Description" "Your companion gains Advantage on all Saving Throws."
data "Icon" "PassiveFeature_Ranger_BeastsDefense"
data "Properties" "Highlighted"

new entry "StormOfClawsAndFangs"
type "PassiveData"
data "DisplayName" "Storm of Claws and Fangs"
data "Description" "Your companion can use its action to make a Melee Attack against each hostile creature within [1] of it."
data "Icon" "PassiveFeature_Ranger_StormOfClawsAndFangs"
data "Properties" "Highlighted"

new entry "SuperiorBeastsDefense"
type "PassiveData"
data "DisplayName" "Superior Beast's Defense"
data "Description" "Whenever an attacker that your companion can see hits it with an attack, it can use its Reaction to halve the attack’s damage against it."
data "DescriptionParams" "Distance(2)"
data "Icon" "PassiveFeature_Ranger_SuperiorBeastsDefense"
data "Properties" "Highlighted"

new entry "SuperiorBeastsDefense_Companion"
type "PassiveData"
data "DisplayName" "Superior Beast's Defense"
data "Description" "Reduce damage dealt to you by half."
data "Icon" "PassiveFeature_Ranger_SuperiorBeastsDefense"
data "Properties" "Highlighted"
data "Conditions" "IsMiss()"
data "StatsFunctorContext" "OnAttacked"
data "StatsFunctors" "RestoreResource(ReactionActionPoint,1,0)"
data "Boosts" "UnlockInterrupt(Interrupt_SuperiorBeastsDefense)"

new entry "Multiattack_GiantBadger_1"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The badger makes two attacks: one with its bite and one with its claws."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_GiantBadger_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_1,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_GiantBadger_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Bite_GiantBadger_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_2,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Brown_1"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The bear makes two attacks: one with its bite and one with its claws."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_Bear_Brown_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_1,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Brown_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Bite_Bear_Brown_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "IsHidden"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_HELPER_2,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Polar_1"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The bear makes two attacks: one with its bite and one with its claws."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_Bear_Polar_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_TECHNICAL,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Bear_Polar_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Bite_Bear_Polar_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "IsHidden;Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_TECHNICAL_2,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Owlbear_1"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The owlbear makes two attacks: one with its beak and one with its claws."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "SpellId('Target_Claws_Owlbear_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_TECHNICAL_3,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Owlbear_2"
type "PassiveData"
data "Conditions" "SpellId('Target_Beak_Owlbear_Wildshape') and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "IsHidden;Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_TECHNICAL_4,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Multiattack_Elemental"
type "PassiveData"
data "DisplayName" "Multiattack"
data "Description" "The elemental makes two attacks."
data "Icon" "PassiveFeature_ExtraAttack"
data "Conditions" "(SpellId('Target_Touch_Elemental_Fire_Wildshape') or SpellId('Target_Slam_Elemental_Earth_WildShape') or SpellId('Target_Slam_Elemental_Water_WildShape') or SpellId('Target_Slam_Elemental_Air_WildShape')) and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SELF,MULTIATTACK_ELEMENTAL,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Reaper"
type "PassiveData"
data "DisplayName" "Reaper"
data "Description" "When you cast a necromancy cantrip that targets one creature, the spell can instead target two creatures within range and within [1] of each other."
data "DescriptionParams" "Distance(2)"
data "Icon" "PassiveFeature_Cleric_Reaper"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpellVariant(SpellId('Target_ChillTouch') | SpellId('Target_TollTheDead') | SpellId('Target_SpareTheDying')),ModifyMaximumTargets(Override,2),ModifyAreaRadius(AdditiveBase,2))"

new entry "TouchOfDeath"
type "PassiveData"
data "DisplayName" "Touch of Death"
data "Description" "When you hit a creature with a melee attack, you can use Channel Divinity to deal extra necrotic damage to the target. The damage equals 5 + twice your cleric level."
data "Icon" "PassiveAction_Cleric_TouchOfDeath"
data "Properties" "Highlighted"
data "Conditions" "IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(TOUCH_OF_DEATH,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "InescapableDestruction"
type "PassiveData"
data "DisplayName" "Inescapable Destruction"
data "Description" "Your ability to channel negative energy becomes more potent. Necrotic damage dealt by your cleric spells and Channel Divinity options ignores resistance to necrotic damage."
data "Icon" "PassiveFeature_Cleric_InescapableDestruction"
data "Properties" "Highlighted"
data "StatsFunctors" "IF(not HasStatus('INESCAPABLE_DESTRUCTION',context.Source)):ApplyStatus(INESCAPABLE_DESTRUCTION,100,-1)"
data "StatsFunctorContext" "OnShortRest;OnLongRest;OnCreate;OnEquip"

new entry "DeathDomain_DivineStrike"
type "PassiveData"
data "DisplayName" "Divine Strike"
data "Description" "Once on each of your turns when you hit a creature with a weapon attack, you can cause the attack to deal an a 1d8 necrotic damage to the target."
data "Icon" "PassiveFeature_Cleric_InescapableDestruction"
data "Properties" "Highlighted"
data "Conditions" "IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(1d8,Necrotic)"
data "StatsFunctorContext" "OnAttack"

new entry "DeathDomain_DivineStrike_2"
type "PassiveData"
data "DisplayName" "Divine Strike"
data "Description" "Once on each of your turns when you hit a creature with a weapon attack, you can cause the attack to deal an a 1d8 necrotic damage to the target."
data "Icon" "PassiveFeature_Cleric_InescapableDestruction"
data "Properties" "Highlighted"
data "Conditions" "IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "DealDamage(2d8,Necrotic)"
data "StatsFunctorContext" "OnAttack"

new entry "ImprovedReaper"
type "PassiveData"
data "DisplayName" "Reaper"
data "Description" "When you cast a necromancy spell of 1st through 5th level that targets one creature, the spell can instead target two creatures within range and within [1] of each other."
data "DescriptionParams" "Distance(2)"
data "Icon" "PassiveFeature_Cleric_ImprovedReaper"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpellVariant(SpellId('Target_CauseFear') | SpellId('Target_InflictWounds') | SpellId('Target_SpareTheDying') | SpellId('Target_Blindness') | SpellId('Target_AnimateDead') | SpellId('Target_BestowCurse') | SpellId('Target_FeignDeath') | SpellId('Target_LifeTransference') | SpellId('Target_Revivify') | SpellId('Target_SpeakWithDead') | SpellId('Target_Blight')),ModifyMaximumTargets(Override,2),ModifyAreaRadius(AdditiveBase,2))"
data "Conditions" "SpellId('Projectile_RayOfSickness') or SpellId('Projectile_RayOfEnfeeblement')"
data "StatsFunctors" "IF(SpellId('Projectile_RayOfSickness')):ApplyStatus(RAY_OF_SICKNESS_REAPER,100,1);IF(SpellId('Projectile_RayOfEnfeeblement')):ApplyStatus(RAY_OF_ENFEEBLEMENT_REAPER,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "ElementalWildShape"
type "PassiveData"
data "DisplayName" "Elemental Wild Shape"
data "Description" "You can expend two uses of Wild Shape to transform into an air elemental, an earth elemental, a fire elemental, or a water elemental."
data "Icon" "Skill_Druid_WildShape_Elemental"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_WildShape_Fire_Elemental);UnlockSpell(Shout_WildShape_Earth_Elemental);UnlockSpell(Shout_WildShape_Air_Elemental);UnlockSpell(Shout_WildShape_Water_Elemental)"

new entry "ThousandForms"
type "PassiveData"
data "DisplayName" "Thousand Forms"
data "Description" "You can cast the Alter Self spell at will."
data "Icon" "PassiveFeature_Druid_ThousandForms"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_AlterSelf);UnlockSpellVariant(SpellId('Shout_AlterSelf'),ModifyUseCosts(Replace,ActionPoint,0,0,ActionPoint))"

new entry "FireForm"
type "PassiveData"
data "DisplayName" "Fire Form"
data "Description" "Creatures that touch the elemental or hits it with a melee attack while within [1] of it takes [2]."
data "DescriptionParams" "Distance(2);DealDamage(1d10,Fire)"
data "Icon" "Spell_Conjuration_FlamingSphere"
data "Properties" "Highlighted"
data "Conditions" "IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit) and not DistanceToTargetGreaterThan(3)"
data "StatsFunctors" "DealDamage(SWAP,1d10,Fire)"
data "StatsFunctorContext" "OnAttacked"

new entry "Illumination"
type "PassiveData"
data "DisplayName" "Illumination"
data "Description" "The elemental sheds light in a [1] radius."
data "DescriptionParams" "Distance(18)"
data "Icon" "Spell_Evocation_Light"
data "Properties" "Highlighted"
data "Boosts" "GameplayLight(18,false,0.1)"

new entry "WaterSusceptibility"
type "PassiveData"
data "DisplayName" "Water Susceptibility"
data "Description" "Whenever the elemental moves in water, it takes [1]."
data "DescriptionParams" "DealDamage(1,Cold)"
data "Icon" "statIcons_RunningWater"
data "Properties" "Highlighted"
data "StatsFunctors" "IF(InSurface('SurfaceDeepWaterRunning') or InSurface('SurfaceWater')):DealDamage(1,Cold)"
data "StatsFunctorContext" "OnMovedDistance"

new entry "Freeze"
type "PassiveData"
data "DisplayName" "Freeze"
data "Description" "If the elemental takes cold damage, it partially freezes; its speed is reduced by [1] until the end of its next turn."
data "Icon" "Status_Chilled"
data "Properties" "Highlighted"
data "Conditions" "HasDamageDoneForType(DamageType.Cold)"
data "StatsFunctors" "ApplyStatus(FREEZE_WATER_ELEMENTAL,100,1)"
data "StatsFunctorContext" "OnDamaged"

new entry "HarnessDivinePower"
type "PassiveData"
data "DisplayName" "Harness Divine Power"
data "Description" "You can expend a use of your Channel Divinity to fuel your spells. As a bonus action, you touch your holy symbol, utter a prayer, and regain one expended spell slot, the level of which can be no higher than half your proficiency bonus (rounded up). The number of times you can use this feature is based on the level you've reached in this class: 2nd level, once; 6th level, twice. You regain all expended uses when you finish a long rest."
data "Icon" "Skill_Cleric_HarnessDivinePower"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_HarnessDivinePower);IF(Tagged('PALADIN',context.Source)):UnlockSpellVariant(SpellId('Shout_HarnessDivinePower') | SpellId('Shout_HarnessDivinePower_1') | SpellId('Shout_HarnessDivinePower_2') | SpellId('Shout_HarnessDivinePower_3'),ModifyUseCosts(Replace,ChannelOath,1,0,ChannelDivinity))"

new entry "WildCompanion"
type "PassiveData"
data "DisplayName" "Wild Companion"
data "Description" "You gain the ability to summon a spirit that assumes an animal form: as an action, you can expend a use of your Wild Shape feature to cast the Find Familiar spell."
data "Icon" "Spell_Conjuration_FindFamiliar"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_FindFamiliar_Druid)"

new entry "SteadyAim"
type "PassiveData"
data "DisplayName" "Steady Aim"
data "Description" "You gain the ability to summon a spirit that assumes an animal form: as an action, you can expend a use of your Wild Shape feature to cast the Find Familiar spell."
data "Icon" "PassiveFeature_Rogue_SteadyAim"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_SteadyAim)"
data "Conditions" "not HasActionResource('Movement', 100, 0, true)"
data "StatsFunctors" "ApplyStatus(SELF,STEADY_AIM_BLOCK,100,1)"
data "StatsFunctorContext" "OnMovedDistance"

new entry "SteadyAim_Jump"
type "PassiveData"
data "Properties" "IsHidden"
data "Conditions" "SpellId('Projectile_Jump') or SpellId('Projectile_Jump_Thief')"
data "StatsFunctors" "ApplyStatus(SELF,STEADY_AIM_BLOCK,100,1)"
data "StatsFunctorContext" "OnCast"

new entry "MagicalGuidance"
type "PassiveData"
data "DisplayName" "Magical Guidance"
data "Description" "You can tap into your inner wellspring of magic to try and conjure success from failure. You can spend 1 sorcery point to reroll an Ability Check with a roll of 3 or less and you must use the new roll."
data "Icon" "PassiveFeature_Sorcerer_MagicalGuidance"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_MagicalGuidance)"
data "StatsFunctors" "RemoveStatus(SELF,MAGICAL_GUIDANCE);RemoveStatus(MAGICAL_GUIDANCE)"
data "StatsFunctorContext" "OnAbilityCheck"

new entry "FavoredEnemy_FavoredFoe"
type "PassiveData"
data "DisplayName" "Favored Foe"
data "Description" "Gain the Favored Foe feature, which allows you to increase damage you deal by [1] once per turn whilst marking a creature."
data "DescriptionParams" "DealDamage(LevelMapValue(FavoredFoe),MainMeleeWeaponDamageType)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_FavoredEnemy_FavoredFoe"
data "Conditions" "IsAttack() and Character() and HasDamageEffectFlag(DamageFlags.Hit) and not IsConcentrating(context.Source) and not HasStatus('FAVORED_FOE',context.Target,context.Source)"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted;OncePerTurn"
data "EnabledConditions" "not IsConcentrating(context.Source) and HasActionResource('FavoredFoePoint',1,0, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnShortRest;OnLongRest"
data "StatsFunctors" "IF(IsDamageTypeAcid()):DealDamage(LevelMapValue(FavoredFoe),Acid);IF(IsDamageTypeCold()):DealDamage(LevelMapValue(FavoredFoe),Cold);IF(IsDamageTypeFire()):DealDamage(LevelMapValue(FavoredFoe),Fire);IF(IsDamageTypeLightning()):DealDamage(LevelMapValue(FavoredFoe),Lightning);IF(IsDamageTypeThunder()):DealDamage(LevelMapValue(FavoredFoe),Thunder);IF(IsDamageTypeRadiant()):DealDamage(LevelMapValue(FavoredFoe),Radiant);IF(IsDamageTypePoison()):DealDamage(LevelMapValue(FavoredFoe),Poison);IF(IsDamageTypePsychic()):DealDamage(LevelMapValue(FavoredFoe),Psychic);IF(IsDamageTypeForce()):DealDamage(LevelMapValue(FavoredFoe),Force);IF(IsDamageTypeSlashing()):DealDamage(LevelMapValue(FavoredFoe),Slashing);IF(IsDamageTypeBludgeoning()):DealDamage(LevelMapValue(FavoredFoe),Bludgeoning);IF(IsDamageTypePiercing()):DealDamage(LevelMapValue(FavoredFoe),Piercing);IF(HasDamageDoneForType(Damage.Necrotic)):DealDamage(LevelMapValue(FavoredFoe),Necrotic);UseActionResource(SELF,FavoredFoePoint,1,0);ApplyStatus(FAVORED_FOE,100,-1);RemoveStatus(SELF,FAVORED_FOE_TECHNICAL);ApplyStatus(SELF,FAVORED_FOE_TECHNICAL,100,-1)"
data "StatsFunctorContext" "OnDamage"
data "TooltipUseCosts" "FavoredFoePoint:1"

new entry "FavoredEnemy_FavoredFoe_Concentrating"
type "PassiveData"
data "DisplayName" "Favored Foe"
data "Properties" "IsHidden;OncePerTurn"
data "Conditions" "IsAttack() and Character() and HasDamageEffectFlag(DamageFlags.Hit) and not IsConcentrating(context.Source) and HasStatus('FAVORED_FOE',context.Target,context.Source)"
data "StatsFunctors" "IF(IsDamageTypeAcid()):DealDamage(LevelMapValue(FavoredFoe),Acid);IF(IsDamageTypeCold()):DealDamage(LevelMapValue(FavoredFoe),Cold);IF(IsDamageTypeFire()):DealDamage(LevelMapValue(FavoredFoe),Fire);IF(IsDamageTypeLightning()):DealDamage(LevelMapValue(FavoredFoe),Lightning);IF(IsDamageTypeThunder()):DealDamage(LevelMapValue(FavoredFoe),Thunder);IF(IsDamageTypeRadiant()):DealDamage(LevelMapValue(FavoredFoe),Radiant);IF(IsDamageTypePoison()):DealDamage(LevelMapValue(FavoredFoe),Poison);IF(IsDamageTypePsychic()):DealDamage(LevelMapValue(FavoredFoe),Psychic);IF(IsDamageTypeForce()):DealDamage(LevelMapValue(FavoredFoe),Force);IF(IsDamageTypeSlashing()):DealDamage(LevelMapValue(FavoredFoe),Slashing);IF(IsDamageTypeBludgeoning()):DealDamage(LevelMapValue(FavoredFoe),Bludgeoning);IF(IsDamageTypePiercing()):DealDamage(LevelMapValue(FavoredFoe),Piercing);IF(HasDamageDoneForType(Damage.Necrotic)):DealDamage(LevelMapValue(FavoredFoe),Necrotic)"
data "StatsFunctorContext" "OnDamage"

new entry "InstinctivePounce"
type "PassiveData"
data "DisplayName" "Instinctive Pounce"
data "Description" "As part of the bonus action you take to enter your rage, you can move up to half your speed."
data "Conditions" "SpellId('Shout_EndlessRage') or SpellId('Shout_Rage') or SpellId('Shout_Rage_Frenzy') or SpellId('Shout_Rage_Totem_Bear') or SpellId('Shout_Rage_Totem_Eagle') or SpellId('Shout_Rage_Totem_Elk') or SpellId('Shout_Rage_Totem_Tiger') or SpellId('Shout_Rage_Totem_Wolf')"
data "StatsFunctors" "ApplyStatus(INSTINCTIVE_POUNCE,100,1)"
data "StatsFunctorContext" "OnCast"

new entry "FightingStyle_ThrownWeaponFighting"
type "PassiveData"
data "DisplayName" "Thrown Weapon Fighting"
data "Description" "When you hit with a ranged attack using a thrown weapon, you gain a +2 bonus to the damage roll."
data "Icon" "PassiveFeature_FightingStyle_ThrownWeaponFighting"
data "Properties" "Highlighted"
data "StatsFunctors" "TARGET:IF(HasWeaponProperty(WeaponProperties.Thrown,context.HitDescription.ThrownObject)):DealDamage(2, ThrownWeaponDamageType)"
data "StatsFunctorContext" "OnDamage"

new entry "FightingStyle_UnarmedFighting"
type "PassiveData"
data "DisplayName" "Unarmed Fighting"
data "Description" "Your unarmed strikes can deal bludgeoning damage equal to 1d6 + your Strength modifier on a hit. If you aren't wielding any weapons or a shield when you make the attack roll, the d6 becomes a d8."
data "Icon" "PassiveFeature_FightingStyle_UnarmedFighting"
data "Properties" "Highlighted"
data "Boosts" "IF(Unarmed(context.Source)):UnlockSpell(Target_UnarmedAttack_UnarmedFighting)"

new entry "PrimalAwareness"
type "PassiveData"
data "DisplayName" "Primal Awareness"
data "Description" "You can focus your awareness through the interconnections of nature: you learn additional spells when you reach certain levels in this class if you don't already know them. These spells don't count against the number of ranger spells you know. You can cast each of these spells once without expending a spell slot. Once you cast a spell in this way, you can't do so again until you finish a long rest."
data "Boosts" "IF(not HasStatus('PRIMAL_AWARENESS_BLOCK',context.Source)):UnlockSpell(Shout_SpeakWithAnimals_PrimalAwareness,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);UnlockSpell(Shout_SpeakWithAnimals,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "PrimalAwareness_17th"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(not HasStatus('PRIMAL_AWARENESS_BLOCK',context.Source)):UnlockSpell(Shout_CommuneWithNature_PrimalAwareness,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom);UnlockSpell(Shout_CommuneWithNature,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf,,Wisdom)"

new entry "DeftExplorer_Canny"
type "PassiveData"
data "DisplayName" "Deft Explorer: Canny"
data "Description" "Choose one of your skill proficiencies. Your proficiency bonus is doubled for any ability check you make using the chosen skill."
data "Boosts" "IF(not HasStatus('DEFT_EXPLORER_CANNY',context.Source)):UnlockSpell(Shout_DeftExplorer_Canny)"
data "BoostContext" "OnStatusApplied"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_Canny"

new entry "DeftExplorer_Roving"
type "PassiveData"
data "DisplayName" "Deft Explorer: Roving"
data "Description" "Your Movement Speed increases by [1]."
data "DescriptionParams" "Distance(1.5)"
data "Boosts" "ActionResource(Movement,1.5,0)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_Roving"

new entry "DeftExplorer_Tireless"
type "PassiveData"
data "DisplayName" "Deft Explorer: Tireless"
data "Description" "You can give yourself a number of temporary hit points equal to 1d8 + your Wisdom modifier. You can use this action a number of times equal to your Proficiency Bonus, and you regain all expended uses when you finish a long rest. In addition, whenever you finish a short rest, your exhaustion level, if any, is decreased by 1."
data "Boosts" "UnlockSpell(Shout_DeftExplorer_Tireless);IF(ConditionResult(context.Source.ProficiencyBonus == 2)):ActionResource(Tireless,2,0);IF(ConditionResult(context.Source.ProficiencyBonus == 3)):ActionResource(Tireless,3,0);IF(ConditionResult(context.Source.ProficiencyBonus == 4)):ActionResource(Tireless,4,0);IF(ConditionResult(context.Source.ProficiencyBonus == 5)):ActionResource(Tireless,5,0);IF(ConditionResult(context.Source.ProficiencyBonus == 6)):ActionResource(Tireless,6,0)"
data "StatsFunctors" "RemoveStatus(EXHAUSTED)"
data "StatsFunctorContext" "OnShortRest"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_Tireless"

new entry "HideInPlainSight"
type "PassiveData"
data "DisplayName" "Hide in Plain Sight"
data "Description" "You camouflage and hide yourself, gaining a +10 bonus to Dexterity (Stealth) checks as long as you do not moving or take actions."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_HideInPlainSight"
data "Boosts" "UnlockSpell(Shout_HideInPlainSight)"

new entry "HideInPlainSight_Check"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "RemoveStatus(SELF,HIDE_IN_PLAIN_SIGHT)"
data "StatsFunctorContext" "OnDamage;OnAttack;OnMovedDistance"

new entry "NaturesVeil"
type "PassiveData"
data "DisplayName" "Nature's Veil"
data "Description" "You draw on the powers of nature to hide yourself from view briefly by magically become invisible. You can use this feature a number of times equal to your proficiency bonus and you regain all expended uses when you finish a long rest."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_NaturesVeil"
data "Boosts" "UnlockSpell(Shout_NaturesVeil);IF(ConditionResult(context.Source.ProficiencyBonus == 2)):ActionResource(NaturesVeil,2,0);IF(ConditionResult(context.Source.ProficiencyBonus == 3)):ActionResource(NaturesVeil,3,0);IF(ConditionResult(context.Source.ProficiencyBonus == 4)):ActionResource(NaturesVeil,4,0);IF(ConditionResult(context.Source.ProficiencyBonus == 5)):ActionResource(NaturesVeil,5,0);IF(ConditionResult(context.Source.ProficiencyBonus == 6)):ActionResource(NaturesVeil,6,0)"

new entry "Vanish"
type "PassiveData"
data "DisplayName" "Vanish"
data "Description" "You can use the Hide action as a bonus action."
data "Boosts" "UnlockSpell(Shout_Hide_BonusAction)"

new entry "FeralSenses"
type "PassiveData"
data "DisplayName" "Feral Senses"
data "Description" "You gain preternatural senses that help you fight creatures you can't see. When you attack a creature you can't see, your inability to see it doesn't impose Disadvantage on your Attack Rolls against it. You are also aware of the location of any invisible creature within [1] of you, provided that the creature isn't hidden from you and you aren't Blinded or Deafened."
data "DescriptionParams" "Distance(9)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_Ranger_FeralSenses"
data "Boosts" "IF(HasStatus('SG_Blinded',context.Source)):Advantage(AttackRoll)"
data "StatsFunctors" "IF(not HasStatus('FERAL_SENSES_AURA',context.Source)):ApplyStatus(FERAL_SENSES_AURA,100,-1)"
data "StatsFunctorContext" "OnCreate;OnTurn"

new entry "FoeSlayer"
type "PassiveData"
data "DisplayName" "Foe Slayer"
data "Description" "You become an unparalleled hunter of your enemies. Once on each of your turns during combat, you can toggle on to add your Wisdom modifier to the attack roll or toggle off to add your Wisdom modifier to the damage roll of an attack you make against a creature."
data "Properties" "Highlighted;ToggledDefaultAddToHotbar;IsToggled;ToggledDefaultOn"
data "Icon" "PassiveFeature_Ranger_FoeSlayer"
data "ToggleOnFunctors" "ApplyStatus(FOE_SLAYER_ATTACK_TOGGLE,100,-1)"
data "ToggleOffFunctors" "ApplyStatus(FOE_SLAYER_DAMAGE_TOGGLE,100,-1)"

new entry "FoeSlayer_Damage"
type "PassiveData"
data "DisplayName" "Foe Slayer: Damage"
data "Properties" "OncePerTurn;IsHidden"
data "Boosts" "DamageBonus(WisdomModifier)"
data "StatsFunctors" "RemoveStatus(SELF,FOE_SLAYER_DAMAGE)"
data "StatsFunctorContext" "OnDamage"

new entry "EscapeTheHorde"
type "PassiveData"
data "DisplayName" "Escape the Horde"
data "Description" "Opportunity attacks against you are made with Disadvantage."
data "Icon" "PassiveFeature_Ranger_EscapeTheHorde"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(ESCAPE_THE_HORDE,100,1)"
data "StatsFunctorContext" "OnTurn"

new entry "MultiattackDefense"
type "PassiveData"
data "DisplayName" "Multiattack Defense"
data "Description" "When a creature hits you with an attack, you gain a +4 bonus to AC against all subsequent attacks made by that creature for the rest of the turn."
data "Icon" "PassiveFeature_Ranger_MultiattackDefense"
data "Properties" "Highlighted"
data "Conditions" "IsAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(MULTI_ATTACK_DEFENSE,100,1);ApplyStatus(SELF,MULTI_ATTACK_DEFENSE_AURA,100,1)"
data "StatsFunctorContext" "OnAttacked"

new entry "SteelWill"
type "PassiveData"
data "DisplayName" "Steel Will"
data "Description" "You have Advantage on Saving Throws against being Frightened."
data "Icon" "PassiveFeature_Ranger_SteelWill"
data "Properties" "Highlighted"
data "Boosts" "Tag(FRIGHTENED_ADV)"

new entry "Volley"
type "PassiveData"
data "DisplayName" "Volley"
data "Description" "You can use your action to make a ranged attack against any number of creatures within [1] of a point within your weapon’s range."
data "DescriptionParams" "Distance(3)"
data "Icon" "PassiveFeature_Ranger_Volley"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Projectile_Volley)"

new entry "WhirlwindAttack"
type "PassiveData"
data "DisplayName" "Whirlwind Attack"
data "Description" "You can use your action to make melee attacks against any number of creatures within [1] of you."
data "DescriptionParams" "Distance(2)"
data "Icon" "PassiveFeature_Ranger_WhirlwindAttack"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_WhirlwindAttack)"

new entry "Evasion"
type "PassiveData"
data "DisplayName" "Evasion"
data "Description" "When you are subjected to an effect, such as a red dragon’s fiery breath or a lightning bolt spell, that allows you to make a Dexterity saving throw to take only half damage, you instead take no damage if you succeed on a saving throw, and only half damage if you fail."
data "Icon" "PassiveFeature_Evasion"
data "Properties" "Highlighted"

new entry "StandAgainstTheTide"
type "PassiveData"
data "DisplayName" "Stand Against the Tide"
data "Description" "When a hostile creature misses you with a Melee Attack, you can use your Reaction to force that creature to repeat the same attack against another creature (other than itself)."
data "Icon" "PassiveFeature_Ranger_StandAgainstTheTide"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_StandAgainstTheTide)"
data "Conditions" "IsMeleeAttack() and IsMiss()"
data "StatsFunctors" "ApplyStatus(SELF,STAND_AGAINST_THE_TIDE_ATTACKER,100,1)"
data "StatsFunctorContext" "OnAttacked"

new entry "StandAgainstTheTide_Attacker"
type "PassiveData"
data "Properties" "IsHidden"
data "Conditions" "IsMeleeAttack()"
data "StatsFunctors" "RemoveStatus(STAND_AGAINST_THE_TIDE)"
data "StatsFunctorContext" "OnAttack"

new entry "SecondWind"
type "PassiveData"
data "DisplayName" "Second Wind"
data "Description" "You can use a bonus action on your turn to regain [1]. Once you use this feature, you must finish a Short or Long Rest before you can use it again."
data "DescriptionParams" "RegainHitPoints(1d10+Level)"
data "Properties" "Highlighted"
data "Icon" "Skill_Fighter_SecondWind"
data "Boosts" "UnlockSpell(Shout_SecondWind)"

new entry "ImprovedCritical"
type "PassiveData"
data "DisplayName" "Improved Critical"
data "Description" "Your weapon attacks have an additional 5% chance to critical hit."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_ImprovedCritical"
data "Boosts" "IF(HasStatus('IMPROVED_CRITICAL',context.Source)):CriticalHit(AttackRoll,Success,,27);IF(HasStatus('IMPROVED_CRITICAL_FIRSTCRIT',context.Source)):CriticalHit(AttackRoll,Success,,27)"

new entry "Indomitable"
type "PassiveData"
data "DisplayName" "Indomitable"
data "Description" "Active to automatically reroll a Saving Throw with a roll below a 13."
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar"
data "Icon" "PassiveFeature_Indomitable"
data "EnabledConditions" "HasActionResource('IndomitablePoint', 1, 0, false,context.Source)"
data "EnabledContext" "OnActionResourcesChanged;OnLongRest"
data "Boosts" "Reroll(SavingThrow,12,true)"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and IsSavingThrow()):UseActionResource(IndomitablePoint,1,0)"
data "StatsFunctorContext" "OnAttacked"
data "TooltipUseCosts" "IndomitablePoint:1"

new entry "SecondWind_2"
type "PassiveData"
using "SecondWind"
data "Description" "You can use a bonus action on your turn to regain [1]. You can use this feature twice before you must finish a Short or Long Rest to use it again."
data "Boosts" "UnlockSpell(Shout_SecondWind_2);ActionResource(SecondWindPoint,2,0)"

new entry "AbilityImprovement_Charisma"
type "PassiveData"
data "Boosts" "Ability(Charisma, 1)"
data "Properties" "IsHidden"

new entry "AbilityImprovement_Constitution"
type "PassiveData"
data "Boosts" "Ability(Constitution, 1)"
data "Properties" "IsHidden"

new entry "AbilityImprovement_Dexterity"
type "PassiveData"
data "Boosts" "Ability(Dexterity, 1)"
data "Properties" "IsHidden"

new entry "AbilityImprovement_Intelligence"
type "PassiveData"
data "Boosts" "Ability(Intelligence, 1)"
data "Properties" "IsHidden"

new entry "AbilityImprovement_Strength"
type "PassiveData"
data "Boosts" "Ability(Strength, 1)"
data "Properties" "IsHidden"

new entry "AbilityImprovement_Wisdom"
type "PassiveData"
data "Boosts" "Ability(Wisdom, 1)"
data "Properties" "IsHidden"

new entry "AuraOfProtection"
type "PassiveData"
data "DisplayName" "Aura of Protection"
data "Description" "Whenever you or a friendly creature within [1] of you must make a Saving Throw, the creature gains a bonus to the Saving Throw equal to your Charisma modifier (minimum of +1). You must be conscious to grant this bonus."
data "DescriptionParams" "Distance(3)"
data "Boosts" "UnlockInterrupt(Interrupt_AuraOfProtection)"
data "ToggleOnFunctors" "ApplyStatus(AURA_OF_PROTECTION,100,-1)"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn"
data "Icon" "PassiveFeature_AuraOfProtection"

new entry "AuraOfCourage"
type "PassiveData"
data "DisplayName" "Aura of Courage"
data "Description" "You and friendly creatures within [1] of you can't be frightened while you are conscious."
data "DescriptionParams" "Distance(3)"
data "Icon" "PassiveFeature_AuraOfCourage"
data "Properties" "Highlighted;ToggledDefaultAddToHotbar;ToggledDefaultOn;IsToggled"
data "Icon" "PassiveFeature_AuraOfWarding"
data "ToggleOnFunctors" "IF(not HasStatus('AURA_OF_COURAGE',context.Source)):ApplyStatus(AURA_OF_COURAGE,100,-1)"

new entry "FightingStyle_Interception"
type "PassiveData"
data "DisplayName" "Interception"
data "Description" "When you have a shield or weapon, reduce the damage dealt by an enemy who attacks on your allies when you are within [1]. You must be able to see the enemy."
data "DescriptionParams" "Distance(1.5)"
data "Icon" "PassiveAction_FightingStyle_Interception"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted;ToggledDefaultOn"
data "TooltipUseCosts" "ReactionActionPoint:1"
data "Boosts" "UnlockInterrupt(Interrupt_Interception)"
data "ToggleOnFunctors" "ApplyStatus(INTERCEPTION_AURA,100,-1)"
data "Conditions" "(IsAttack() and IsMiss()) or (not IsAttack())"
data "StatsFunctors" "RemoveStatus(INTERCEPTION_2);RemoveStatus(INTERCEPTION_3);RemoveStatus(INTERCEPTION_4);RemoveStatus(INTERCEPTION_5);RemoveStatus(INTERCEPTION_6)"
data "StatsFunctorContext" "OnAttacked"

new entry "UncannyDodge"
type "PassiveData"
data "DisplayName" "Shared_Passive_UncannyDodge_DisplayName"
data "Description" "Shared_Passive_UncannyDodge_Description"
data "Icon" "PassiveFeature_UncannyDodge"
data "Properties" "Highlighted"
data "Conditions" "IsMiss()"
data "StatsFunctorContext" "OnAttacked"
data "StatsFunctors" "RestoreResource(ReactionActionPoint,1,0)"
data "Boosts" "UnlockInterrupt(Interrupt_UncannyDodge)"

new entry "DisarmingAttack"
type "PassiveData"
data "DisplayName" "Shared_Passive_DisarmingAttack_DisplayName"
data "Description" "Shared_Passive_DisarmingAttack_Description"
data "Boosts" "UnlockInterrupt(Interrupt_DisarmingAttack);UnlockInterrupt(Interrupt_DisarmingAttack_Critical)"

new entry "MenacingAttack"
type "PassiveData"
data "DisplayName" "Shared_Passive_MenacingAttack_DisplayName"
data "Description" "Shared_Passive_MenacingAttack_Description"
data "Boosts" "UnlockInterrupt(Interrupt_MenacingAttack);UnlockInterrupt(Interrupt_MenacingAttack_Critical)"

new entry "PushingAttack"
type "PassiveData"
data "DisplayName" "Shared_Passive_PushingAttack_DisplayName"
data "Description" "Shared_Passive_PushingAttack_Description"
data "DescriptionParams" "Distance(4.5)"
data "Boosts" "UnlockInterrupt(Interrupt_PushingAttack);UnlockInterrupt(Interrupt_PushingAttack_Critical)"

new entry "TripAttack"
type "PassiveData"
data "DisplayName" "Shared_Passive_TripAttack_DisplayName"
data "Description" "Shared_Passive_TripAttack_Description"
data "ExtraDescription" "Shared_Passive_TripAttack_ExtraDescription"
data "Boosts" "UnlockInterrupt(Interrupt_TripAttack);UnlockInterrupt(Interrupt_TripAttack_Critical)"

new entry "Monk_UnarmoredDefense"
type "PassiveData"
data "DisplayName" "Unarmored Defense"
data "Description" "While you are wearing no armor and not wielding a shield, your AC equals 10 + your Dexterity modifier + your Wisdom modifier."
data "Icon" "PassiveFeature_UnarmoredDefense_Monk"
data "Boosts" "ACOverrideFormula(10,true,Dexterity,Wisdom)"
data "BoostConditions" "not WearingArmor(context.Source) and not HasShieldEquipped(context.Source)"
data "BoostContext" "OnEquip;OnCreate;OnInventoryChanged"
data "Properties" "Highlighted"

new entry "Monk_MartialArts"
type "PassiveData"
data "DisplayName" "Martial Arts"
data "Description" "You can use Dexterity instead of Strength for the attack and damage rolls of your unarmed strikes and monk weapons and when you use the Attack action with an unarmed strike or a monk weapon on your turn, you can make one unarmed strike as a bonus action. Additionally, you can roll a d4 in place of the normal damage of your unarmed strike or monk weapon. This die changes at 5th (to 1d6), 11th (to 1d8) and 17th level (to 1d10)."
data "ExtraDescription" "You can only gain these benefits while you are unarmed or wielding monk weapons and you aren't wearing armor or wielding a shield."
data "Icon" "PassiveFeature_MartialArts"
data "Properties" "Highlighted"
data "Boosts" "IF(IsMeleeUnarmedAttack() and HigherDex()):RollBonus(MeleeUnarmedAttack,-StrengthModifier);IF(IsMeleeUnarmedAttack() and HigherDex()):RollBonus(MeleeUnarmedAttack,DexterityModifier)"
data "BoostConditions" "not WearingArmor(context.Source) and not HasShieldEquipped(context.Source) and ((WieldingWeapon('Melee') and not WieldingWeapon('Heavy')) or (HasStatus('MONK_WEAPON',GetActiveWeapon()) or HasStatus('MONK_WEAPON'GetActiveWeapon()) or HasStatus('DEDICATED_WEAPON'GetActiveWeapon())) or Unarmed(context.Source))"
data "BoostContext" "OnCreate;OnEquip;OnInventoryChanged"

new entry "MartialArts_Bonus"
type "PassiveData"
data "Conditions" "((IsWeaponAttack() and (HasStatus('MONK_WEAPON',GetActiveWeapon()) or (WieldingWeapon('Melee',false,false,context.Source) and not WieldingWeapon('Heavy',false,false,context.Source)))) or (IsMeleeUnarmedAttack())) and HasUseCosts('ActionPoint', true) and not HasUseCosts('KiPoint', true) and not WearingArmor(context.Source) and not HasShieldEquipped(context.Source)"
data "StatsFunctors" "IF(not HasStatus('FLURRY_OF_BLOWS',context.Source)):ApplyStatus(SELF,MARTIALARTS_BONUS,100,1)"
data "StatsFunctorContext" "OnAttack"
data "Boosts" "IF(HigherDex()):UnlockSpell(Target_UnarmedAttack_Dexterity,,,,Dexterity);IF(HigherStr()):UnlockSpell(Target_UnarmedAttack_Strength)"
data "Properties" "IsHidden"

new entry "MonkWeapon"
type "PassiveData"
data "Conditions" "IsWeaponOfProficiencyGroup('Clubs|Daggers|Greatclubs|Handaxes|Javelins|LightHammers|Maces|Quarterstaffs|Shortswords|Sickles|Spears', GetActiveWeapon()) and not HasStatus('DEDICATED_WEAPON',GetActiveWeapon())"
data "StatsFunctors" "ApplyEquipmentStatus(SELF,MainHand,MONK_WEAPON,100,-1);IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|LightHammers|Sickles', GetActiveWeapon()) and ConditionResult(context.Source.Level > 5) and ConditionResult(context.Source.Level < 11)):ApplyEquipmentStatus(SELF,MainHand,MONK_WEAPON_DIE_6,100,-1);IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|LightHammers|Handaxes|Javelins|Maces|Shortswords|Sickles|Spears', GetActiveWeapon()) and ConditionResult(context.Source.Level > 10) and ConditionResult(context.Source.Level < 17)):ApplyEquipmentStatus(SELF,MainHand,MONK_WEAPON_DIE_8,100,-1);IF(IsWeaponOfProficiencyGroup('Clubs|Daggers|Greatclubs|Handaxes|Javelins|LightHammers|Maces|Shortswords|Sickles|Spears', GetActiveWeapon()) and CharacterLevelGreaterThan(16)):ApplyEquipmentStatus(SELF,MainHand,MONK_WEAPON_DIE_10,100,-1)"
data "StatsFunctorContext" "OnAttack"
data "Properties" "IsHidden"

new entry "FlurryOfBlows"
type "PassiveData"
data "DisplayName" "Flurry of Blows"
data "Description" "After you take the Attack action, spend 1 ki point to make two unarmed strikes as a bonus action."
data "Icon" "PassiveFeature_FlurryOfBlows"
data "Boosts" "UnlockInterrupt(Interrupt_FlurryOfBlows);UnlockSpell(Shout_Dodge_PatientDefense);UnlockSpell(Shout_Dash_StepOfTheWind);UnlockSpell(Shout_Disengage_StepOfTheWind)"

new entry "PatientDefense"
type "PassiveData"
data "DisplayName" "Patient Defense"
data "Description" "You can spend 1 ki point to take the Dodge action as a bonus action on your turn."
data "Icon" "PassiveFeature_PatientDefense"
data "EnabledConditions" "HasActionResource('KiPoint', 1, 0, false, context.Source)"
data "EnabledContext" "OnCastResolved;OnShortRest;OnLongRest;OnActionResourcesChanged"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar"
data "ToggleOnFunctors" "If(HasActionResource('KiPoint', 1, 0, false, context.Source)):ApplyStatus(PATIENT_DEFENSE,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(PATIENT_DEFENSE)"

new entry "StepOfTheWind"
type "PassiveData"
data "DisplayName" "Step of the Wind"
data "Description" "You can spend 1 ki point to take the Disengage or Dash action as a bonus action on your turn, and your jump distance is doubled for the turn."
data "Icon" "PassiveFeature_StepOfTheWind"
data "EnabledConditions" "HasActionResource('KiPoint', 1, 0, false, context.Source)"
data "EnabledContext" "OnShortRest;OnLongRest"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "ToggleOnFunctors" "ApplyStatus(STEP_OF_THE_WIND,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(STEP_OF_THE_WIND);RemoveStatus(STEP_OF_THE_WIND_JUMP)"
data "Conditions" "(SpellId('Shout_Disengage') or SpellId('Shout_Dash')) and HasStatus('STEP_OF_THE_WIND',context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,STEP_OF_THE_WIND_JUMP,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "Monk_UnarmoredMovement"
type "PassiveData"
data "DisplayName" "Unarmored Movement"
data "Description" "UnarmoredMovement_Description"
data "DescriptionParams" "Distance(3)"
data "Boosts" "ActionResource(Movement,3,0)"
data "BoostConditions" "not WearingArmor(context.Source) and not HasShieldEquipped(context.Source)"
data "BoostContext" "OnEquip;OnUnequip;OnMove;OnStatusApplied"
data "Icon" "PassiveFeature_UnarmoredMovement"
data "Properties" "Highlighted"

new entry "UnarmoredMovement_6th"
type "PassiveData"
using "Monk_UnarmoredMovement"
data "Description" "UnarmoredMovement_6th_Description"
data "DescriptionParams" "Distance(4.5)"
data "Boosts" "ActionResource(Movement,4.5,0)"

new entry "UnarmoredMovement_10th"
type "PassiveData"
using "Monk_UnarmoredMovement"
data "Description" "UnarmoredMovement_10th_Description"
data "DescriptionParams" "Distance(6)"
data "Boosts" "ActionResource(Movement,6,0)"

new entry "UnarmoredMovement_14th"
type "PassiveData"
using "Monk_UnarmoredMovement"
data "Description" "UnarmoredMovement_14th_Description"
data "DescriptionParams" "Distance(7.5)"
data "Boosts" "ActionResource(Movement,7.5,0)"

new entry "UnarmoredMovement_18th"
type "PassiveData"
using "Monk_UnarmoredMovement"
data "Description" "UnarmoredMovement_18th_Description"
data "DescriptionParams" "Distance(9)"
data "Boosts" "ActionResource(Movement,9,0)"

new entry "DedicatedWeapon"
type "PassiveData"
data "DisplayName" "Dedicated Weapon"
data "Description" "You train yourself to use a variety of weapons as monk weapons, not just simple melee weapons and shortswords. Whenever you finish a short or long rest, you can touch one weapon, focus your ki on it, and then count that weapon as a monk weapon until you use this feature again. The weapon must be a simple or martial weapon. You must be proficient with it. It must lack the heavy and special properties."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_DedicatedWeapon"
data "StatsFunctors" "ApplyStatus(DEDICATED_WEAPON_TECHNICAL,100,-1)"
data "StatsFunctorContext" "OnShortRest;OnLongRest"

new entry "DeflectMissiles"
type "PassiveData"
data "DisplayName" "Deflect Missiles"
data "Description" "You can use your reaction to deflect or catch the missile when you are hit by a ranged weapon attack, reducing its damage by 1d10 + your Dexterity modifier + your monk level. If you reduce the damage to 0, you can catch the missile if you have one hand free. If you catch a missile in this way, you can spend 1 ki point to make a ranged attack using the piece of ammunition caught as part of the same reaction. You make this attack with proficiency, regardless of your weapon proficiencies, and the missile counts as a monk weapon for the attack."
data "Icon" "PassiveFeature_DeflectMissiles"
data "Properties" "Highlighted"
data "Boosts" "UnlockInterrupt(Interrupt_DeflectMissiles)"

new entry "KiFueledAttack"
type "PassiveData"
data "DisplayName" "Ki-Fueled Attack"
data "Description" "If you spend 1 ki point or more as part of your action on your turn, you can make one attack with an unarmed strike or a monk weapon as a bonus action before the end of the turn."
data "Icon" "PassiveFeature_KiFueledAttack"
data "Boosts" "UnlockInterrupt(Interrupt_KiFueledAttack)"
data "Properties" "Highlighted"

new entry "SlowFall"
type "PassiveData"
data "DisplayName" "Slow Fall"
data "Description" "You take half damage from falling."
data "Boosts" "FallDamageMultiplier(0.5)"
data "Icon" "PassiveFeature_SlowFall"
data "Properties" "Highlighted"

new entry "QuickenedHealing"
type "PassiveData"
data "DisplayName" "Quickened Healing"
data "Description" "As an action, you can spend 2 ki points and roll a Martial Arts die. You regain a number of hit points equal to the number rolled plus your proficiency bonus."
data "Boosts" "UnlockSpell(Shout_QuickenedHealing)"
data "Icon" "PassiveFeature_QuickenedHealing"
data "Properties" "Highlighted"

new entry "StunningStrike"
type "PassiveData"
data "DisplayName" "Stunning Strike"
data "Description" "You can interfere with the flow of ki in an opponent’s body. When you hit another creature with a melee weapon attack, you can spend 1 ki point to attempt a stunning strike."
data "Icon" "PassiveFeature_StunningStrike"
data "Properties" "Highlighted"
data "Boosts" "UnlockInterrupt(Interrupt_StunningStrike)"

new entry "FocusedAim"
type "PassiveData"
data "DisplayName" "Focused Aim"
data "Description" "When you attack a creature, you can spend 1 to 3 ki points to increase your attack roll by 2 for each of these ki points you spend."
data "Icon" "PassiveFeature_FocusedAim"
data "Properties" "Highlighted"
data "Boosts" "UnlockInterrupt(Interrupt_FocusedAim);UnlockInterrupt(Interrupt_FocusedAim_2);UnlockInterrupt(Interrupt_FocusedAim_3)"

new entry "KiEmpoweredStrikes"
type "PassiveData"
data "Icon" "PassiveFeature_KiEmpoweredStrikes"
data "DisplayName" "Ki-Empowered Strikes"
data "Description" "Your unarmed strikes count as magical for the purpose of overcoming resistance and immunity to nonmagical attacks and damage."
data "Properties" "Highlighted"

new entry "UnarmoredMovementImprovement_Monk"
type "PassiveData"
data "DisplayName" "Unarmored Movement Improvement"
data "Description" "When you aren't wearing armour or wielding a shield, you gain expertise in the Acrobatics and Athletics skills."
data "Boosts" "ExpertiseBonus(Acrobatics);ExpertiseBonus(Athletics)"
data "BoostConditions" "not WearingArmor(context.Source) and not HasShieldEquipped(context.Source)"
data "BoostContext" "OnEquip;OnUnequip;OnInventoryChanged"
data "Properties" "IsHidden"

new entry "StillnessOfMind"
type "PassiveData"
data "DisplayName" "StillnessOfMind"
data "Description" "You can use your action to end one effect on yourself that is causing you to be charmed or frightened."
data "Boosts" "UnlockSpell(Shout_StillnessOfMind)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_StillnessOfMind"

new entry "PurityOfBody"
type "PassiveData"
data "DisplayName" "Purity of Body"
data "Description" "Your mastery of the ki flowing through you makes you immune to disease and poison."
data "Boosts" "StatusImmunity(SG_Poisoned);StatusImmunity(SG_Disease)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_PurityOfBody"

new entry "TongueOfTheSunAndMoon"
type "PassiveData"
data "DisplayName" "Tongue of the Sun and Moon"
data "Description" "You learn to touch the ki of other minds so that you understand all spoken languages. Moreover, any creature that can understand a language can understand what you say."
data "Boosts" "Tag(COMPREHEND_LANGUAGES)"

new entry "DiamondSoul"
type "PassiveData"
data "DisplayName" "Diamond Soul"
data "Description" "Your mastery of ki grants you proficiency in all saving throws."
data "Boosts" "ProficiencyBonus(SavingThrow,Strength);ProficiencyBonus(SavingThrow,Dexterity);ProficiencyBonus(SavingThrow,Constitution);ProficiencyBonus(SavingThrow,Intelligence);ProficiencyBonus(SavingThrow,Wisdom);ProficiencyBonus(SavingThrow,Charisma)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_DiamondSoul"

new entry "DiamondSoul_Ki"
type "PassiveData"
using "DiamondSoul"
data "Description" "Automatically reroll the next Saving Throw you make."
data "Conditions" "IsSavingThrow()"
data "Properties" "IsHidden;IsToggled;ToggledDefaultAddToHotbar"
data "EnabledConditions" "(not context.HasContextFlag(StatsFunctorContext.OnAttacked) and HasActionResource('KiPoint', 1, 0, false,context.Source)) or (context.HasContextFlag(StatsFunctorContext.OnAttacked) and HasActionResource('KiPoint', 1, 0, false))"
data "Boosts" ""
data "EnabledContext" "OnShortRest;OnLongShort;OnAttacked"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and (HasStringInSpellRoll('SavingThrow') | HasStringInFunctorConditions('SavingThrow'))):UseActionResource(KiPoint,1)"
data "StatsFunctorContext" "OnAttacked"
data "ToggleOnFunctors" "ApplyStatus(DIAMOND_SOUL,100,-1)"
data "ToggleOffFunctors" "ApplyStatus(DIAMOND_SOUL,100,-1)"
data "ToggleOnEffect" "VFX_Spells_Cast_Bard_Generic_BodyFX_Passive_BardicInspiration_SavingThrow_01:Dummy_BodyFX:;"
data "TooltipUseCosts" "KiPoint:1"

new entry "TimelessBody"
type "PassiveData"
data "DisplayName" "Timeless Body"
data "Description" "Your ki sustains you so that you suffer none of the frailty of old age, and you can’t be aged magically. You can still die of old age, however. In addition, you no longer need food or water."

new entry "EmptyBody"
type "PassiveData"
data "DisplayName" "Empty Body"
data "Description" "You can use your action to spend 4 ki points to become invisible for 1 minute. During that time, you also have resistance to all damage but force damage."
data "Boosts" "UnlockSpell(Shout_EmptyBody)"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_EmptyBody"

new entry "PerfectSelf"
type "PassiveData"
data "DisplayName" "Perfect Self"
data "Description" "When you roll for initiative and have no ki points remaining, you regain 4 ki points."
data "StatsFunctors" "IF(Combat(context.Source) and HasActionResource('KiPoint', 0, 0, false, context.Source) and not HasStatus('PERFECT_SELF_BLOCK',context.Source)):RestoreResource(SELF,KiPoint, 4)"
data "StatsFunctorContext" "OnTurn"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_PerfectSelf"

new entry "ShadowArts"
type "PassiveData"
data "DisplayName" "Shadow Arts"
data "Description" "You can use your ki to duplicate the effects of the Darkness, Darkvision, Pass Without Trace and Silence spells without providing material components. Additionally, you gain the Minor Illusion cantrip."
data "Boosts" "UnlockSpell(Target_MinorIllusion,,,,Wisdom);UnlockSpell(Target_Darkness_ShadowArts,,,,Wisdom);UnlockSpell(Target_Darkvision_ShadowArts,,,,Wisdom);UnlockSpell(Shout_PassWithoutTrace_ShadowArts,,,,Wisdom);UnlockSpell(Target_Silence_ShadowArts,,,,Wisdom)"

new entry "ShadowStep"
type "PassiveData"
data "DisplayName" "Cloak of Shadows"
data "Description" "You gain the ability to step from one shadow into another."
data "Icon" "PassiveFeature_ShadowStep"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_ShadowStep)"

new entry "CloakOfShadows"
type "PassiveData"
data "DisplayName" "Cloak of Shadows"
data "Description" "You have learned to become one with the shadows."
data "Icon" "PassiveFeature_CloakOfShadows"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_CloakOfShadows)"

new entry "Opportunist"
type "PassiveData"
data "DisplayName" "Opportunist"
data "Description" "You can exploit a creature's momentary distraction when it is hit by an attack while [1] of you by making a melee attack against it."
data "DescriptionParams" "Distance(1.5)"
data "Icon" "PassiveAction_Opportunist"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn"
data "ToggleOnFunctors" "ApplyStatus(OPPORTUNIST_AURA,100,-1)"
data "TooltipUseCosts" "ReactionActionPoint:1"

new entry "TouchOfDeath"
type "PassiveData"
data "DisplayName" "Touch of Death"
data "Description" "Your study of death allows you to extract vitality from another creature as it nears its demise. When you reduce a creature within [1] of you to [2], you gain [3]."
data "DescriptionParams" "Distance(1.5);RegainHitPoints(0);GainTemporaryHitPoints(WisdomModifier+Level)"
data "Icon" "PassiveFeature_TouchOfDeath"
data "Conditions" "HasHPLessThan(1) and IsKillingBlow() and (IsMeleeAttack() or IsUnarmedAttack())"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(PASSIVE_DARK_ONES_BLESSING,100,0);ApplyStatus(SELF,TOUCH_OF_DEATH,100,-1);"
data "StatsFunctorContext" "OnDamage"

new entry "HourOfReaping"
type "PassiveData"
data "DisplayName" "Hour of Reaping"
data "Description" "You gain the ability to unsettle or terrify those around you."
data "Icon" "PassiveFeature_HourOfReaping"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Shout_HourOfReaping,,,,Wisdom)"

new entry "MasteryOfDeath"
type "PassiveData"
data "DisplayName" "Mastery of Death"
data "Description" "You use your familiarity with death to escape its grasp. When you are reduced to [1], you can expend 1 ki point to have [2] instead."
data "DescriptionParams" "RegainHitPoints(0);RegainHitPoints(1)"
data "Icon" "PassiveFeature_MasteryOfDeath"

new entry "MasteryOfDeath_Ki"
type "PassiveData"
using "MasteryOfDeath"
data "Description" "Automatically spend 1 ki point to regain [1] after being reduced to [2]."
data "DescriptionParams" "RegainHitPoints(1);RegainHitPoints(0)"
data "Icon" "PassiveAction_MasteryOfDeath"
data "PriorityOrder" "1"
data "EnabledConditions" "HasActionResource('KiPoint', 1, 0, false,context.Source)"
data "EnabledContext" "OnStatusApplied;OnShortRest;OnLongRest"
data "Conditions" "HasHPLessThan(1)"
data "StatsFunctors" "UseActionResource(KiPoint,1)"
data "StatsFunctorContext" "OnDamaged"
data "ToggleOnFunctors" "ApplyStatus(MASTERY_OF_DEATH,100,-1)"
data "ToggleOffFunctors" "RemoveStatus(MASTERY_OF_DEATH)"
data "TooltipUseCosts" "KiPoint:1"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;IsHidden"

new entry "TouchOfTheLongDeath"
type "PassiveData"
data "DisplayName" "Touch of the Long Death"
data "Description" "Your touch can channel the energy of death into a creature."
data "Icon" "PassiveFeature_TouchOfTheLongDeath"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_TouchOfTheLongDeath,,,,Wisdom)"

new entry "OpenHandTechnique"
type "PassiveData"
data "DisplayName" "Open Hand Technique"
data "Description" "You can manipulate your enemy's ki when you harness your own. Whenever you hit a creature with one of the attacks granted by your Flurry of Blows, you can impose an effect on that target."
data "Icon" "PassiveFeature_OpenHandTechnique"
data "Properties" "Highlighted"

new entry "OpenHandTechnique_Prone"
type "PassiveData"
data "DisplayName" "Open Hand Technique: Prone"
data "Description" "The target is knocked prone after hitting it with an attack granted by Flurry of Blows."
data "EnabledConditions" "HasStatus('FLURRY_OF_BLOWS',context.Source)"
data "EnabledContext" "OnCastResolved;OnStatusApplied;OnStatusRemoved"
data "Icon" "PassiveFeature_OpenHandTechnique"
data "Conditions" "(SpellId('Target_FlurryOfBlows_Dexterity') or SpellId('Target_FlurryOfBlows_Strength')) and HasDamageEffectFlag(DamageFlags.Hit)"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;MetaMagic;IsHidden"
data "StatsFunctors" "IF(not SavingThrow(Ability.Dexterity, SourceSpellDC())):ApplyStatus(PRONE,100,1)"
data "StatsFunctorContext" "OnAttack"
data "ToggleGroup" "Metamagic"

new entry "OpenHandTechnique_Push"
type "PassiveData"
using "OpenHandTechnique_Prone"
data "DisplayName" "Open Hand Technique: Push"
data "Description" "The target is knocked push [1] away from you after hitting it with an attack granted by Flurry of Blows."
data "DescriptionParams" "Distance(4.5)"
data "StatsFunctors" "IF(not SavingThrow(Ability.Strength, SourceSpellDC())):Force(4.5)"

new entry "OpenHandTechnique_Reactions"
type "PassiveData"
using "OpenHandTechnique_Prone"
data "DisplayName" "Open Hand Technique: Reaction"
data "Description" "The target cannot take Reactions after hitting it with an attack granted by Flurry of Blows."
data "StatsFunctors" "ApplyStatus(OPEN_HAND_TECHNIQUE_REACTIONS,100,2)"

new entry "WholenessOfBody"
type "PassiveData"
data "DisplayName" "Wholeness of Body"
data "Description" "You gain the ability to heal yourself."
data "Boosts" "UnlockSpell(Shout_WholenessOfBody)"
data "Icon" "PassiveFeature_WholenessOfBody"
data "Properties" "Highlighted"

new entry "Tranquility"
type "PassiveData"
data "DisplayName" "Tranquility"
data "Description" "You can enter a special meditation that surrounds you with an aura of peace. At the end of a long rest, you gain the effect of a Sanctuary spell that lasts until the start of your next long rest (the spell can end early as normal)."
data "Icon" "PassiveFeature_Tranquility"
data "Properties" "Highlighted"
data "StatsFunctors" "ApplyStatus(SANCTUARY_TRANQUILITY,100,-1)"
data "StatsFunctorContext" "OnLongRest"

new entry "QuiveringPalm"
type "PassiveData"
data "DisplayName" "Quivering Palm"
data "Description" "You gain the ability to set up lethal vibrations in someone's body when you hit them with an unarmed attack."
data "Icon" "PassiveFeature_QuiveringPalm"
data "Properties" "Highlighted"
data "Boosts" "IF(HasStatus('QUIVERING_PALM_TECHNICAL',context.Source)):UnlockSpell(Shout_QuiveringPalm);UnlockInterrupt(Interrupt_QuiveringPalm)"
data "BoostContext" "OnStatusApplied;OnStatusRemoved"

new entry "ElementalDisciplineSpells"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(CharacterLevelGreaterThan(8)):UnlockSpell(Target_HoldPerson_Monk_3,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Target_HoldPerson_Monk_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Target_HoldPerson_Monk_5,,,,Wisdom);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Zone_Thunderwave_Monk_2,,,,Wisdom);IF(CharacterLevelGreaterThan(8)):UnlockSpell(Zone_Thunderwave_Monk_3,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Zone_Thunderwave_Monk_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Zone_Thunderwave_Monk_5,,,,Wisdom);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Target_FistOfUnbrokenAir_3,,,,Wisdom);IF(CharacterLevelGreaterThan(8)):UnlockSpell(Target_FistOfUnbrokenAir_4,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Target_FistOfUnbrokenAir_5,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Target_FistOfUnbrokenAir_6,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Projectile_Fireball_Monk_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Projectile_Fireball_Monk_5,,,,Wisdom);IF(CharacterLevelGreaterThan(8)):UnlockSpell(Target_Shatter_Monk_3,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Target_Shatter_Monk_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Target_Shatter_Monk_5,,,,Wisdom);IF(CharacterLevelGreaterThan(4)):UnlockSpell(Zone_BurningHands_Monk_2,,,,Wisdom);IF(CharacterLevelGreaterThan(8)):UnlockSpell(Zone_BurningHands_Monk_3,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Zone_BurningHands_Monk_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Zone_BurningHands_Monk_5,,,,Wisdom);IF(CharacterLevelGreaterThan(8)):UnlockSpell(Target_WaterWhip_3,,,,Wisdom);IF(CharacterLevelGreaterThan(12)):UnlockSpell(Target_WaterWhip_4,,,,Wisdom);IF(CharacterLevelGreaterThan(16)):UnlockSpell(Target_WaterWhip_5,,,,Wisdom)"

new entry "BreathOfWinter"
type "PassiveData"
data "DisplayName" "Breath of Winter"
data "Description" "You can spend 6 ki points to cast Cone of Cold."
data "Boosts" "UnlockSpell(Zone_ConeOfCold_Monk,,,,Wisdom)"

new entry "ClenchOfTheNorthWind"
type "PassiveData"
data "DisplayName" "Clench of the North Wind"
data "Description" "You can spend 3 ki points to cast Hold Person."
data "Boosts" "UnlockSpell(Target_HoldPerson_Monk,,,,Wisdom)"

new entry "ElementalAttunement"
type "PassiveData"
data "DisplayName" "Elemental Attunement"
data "Description" "You learn to briefly control elemental forces."
data "Boosts" "UnlockSpell(Target_ElementalAttunement,,,,Wisdom)"

new entry "EternalMountainDefense"
type "PassiveData"
data "DisplayName" "Eternal Mountain Defense"
data "Description" "You can spend 5 ki points to cast Stoneskin, targeting yourself."
data "Boosts" "UnlockSpell(Target_Stoneskin_Monk,,,,Wisdom)"

new entry "FangsOfTheFireSnake"
type "PassiveData"
data "DisplayName" "Fangs of the Fire Snake"
data "Description" "You can use the Fangs of the Fire Snake attack. When you use this attack, your unarmed strikes' reach increases by [1] and they deal fire damage instead of bludgeoning damage until the end of the turn. If you spend 1 ki point when an unarmed strike hits, it also deals an extra [2]."
data "DescriptionParams" "Distance(3);DealDamage(1d10,Fire)"
data "Properties" "Highlighted"
data "Icon" "PassiveAction_FangsOfTheFireSnake"
data "Boosts" "IF(HigherDex()):UnlockSpell(Target_FangsOfTheFireSnake_Dexterity,,,,Dexterity);IF(HigherStr()):UnlockSpell(Target_FangsOfTheFireSnake_Strength)"
data "Conditions" "FangsOfTheFireSnakeKi() and IsMiss()"
data "StatsFunctors" "RestoreResource(SELF,KiPoint,1,0)"
data "StatsFunctorContext" "OnAttack"

new entry "FangsOfTheFireSnake_Spells"
type "PassiveData"
data "Boosts" "IF(HigherDex() and not HasStatus('EXTRA_ATTACK',context.Source) and not HasStatus('KI_FUELED_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_Dexterity_Ki_2,,,,Dexterity);IF(HigherStr() and not HasStatus('EXTRA_ATTACK',context.Source) and not HasStatus('KI_FUELED_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_Strength_Ki_2);IF(HigherDex() and HasStatus('EXTRA_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_ExtraAttack_Dexterity_Ki,,,,Dexterity);IF(HigherStr() and HasStatus('EXTRA_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_ExtraAttack_Strength_Ki);IF(HigherDex() and HasStatus('KI_FUELED_ATTACK',context.Source) and not HasStatus('EXTRA_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_BonusAction_Dexterity_Ki,,,,Dexterity);IF(HigherStr() and HasStatus('KI_FUELED_ATTACK',context.Source) and not HasStatus('EXTRA_ATTACK',context.Source)):UnlockSpell(Target_FangsOfTheFireSnake_BonusAction_Strength_Ki)"
data "BoostContext" "OnCreate;OnEquip;OnInventoryChanged;OnStatusApplied;OnAttack;OnStatusRemoved"
data "Properties" "IsHidden"

new entry "FangsOfTheFireSnake_ExtraAttack"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "(SpellId('Target_FangsOfTheFireSnake_Dexterity_Ki') or SpellId('Target_FangsOfTheFireSnake_Dexterity_Ki_2') or SpellId('Target_FangsOfTheFireSnake_Strength_Ki') or SpellId('Target_FangsOfTheFireSnake_Strength_Ki_2')) and HasUseCosts('ActionPoint', true) and not Tagged('EXTRA_ATTACK_BLOCKED',context.Source) and TurnBased() and ConditionResult(context.HitDescription.FirstAttack)"
data "StatsFunctors" "ApplyStatus(SELF,FANGS_OF_THE_FIRE_SNAKE_EXTRA_ATTACK,100,1)"

new entry "FistOfFourThunders"
type "PassiveData"
data "DisplayName" "Fist of Four Thunders"
data "Description" "You can spend 2 ki points to cast Thunderwave."
data "Boosts" "UnlockSpell(Zone_Thunderwave_Monk,,,,Wisdom)"

new entry "FistOfUnbrokenAir"
type "PassiveData"
data "DisplayName" "Fist of Unbroken Air"
data "Description" "You can create a blast of compressed air that strikes like a mighty fist."
data "Boosts" "UnlockSpell(Target_FistOfUnbrokenAir,,,,Wisdom)"

new entry "FlamesOfThePhoenix"
type "PassiveData"
data "DisplayName" "Flames of the Phoenix"
data "Description" "You can spend 4 ki points to cast Fireball."
data "Boosts" "UnlockSpell(Projectile_Fireball_Monk,,,,Wisdom)"

new entry "GongOfTheSummit"
type "PassiveData"
data "DisplayName" "Gong of the Summit"
data "Description" "You can spend 3 ki points to cast Shatter."
data "Boosts" "UnlockSpell(Target_Shatter_Monk,,,,Wisdom)"

new entry "RideTheWind"
type "PassiveData"
data "DisplayName" "Ride the Wind"
data "Description" "You can spend 4 ki points to cast Fly, targeting yourself."
data "Boosts" "UnlockSpell(Target_Fly_Monk,,,,Wisdom)"

new entry "RushOfTheGaleSpirits"
type "PassiveData"
data "DisplayName" "Rush of the Gale Spirits"
data "Description" "You can spend 2 ki points to cast Gust of Wind."
data "Boosts" "UnlockSpell(Zone_GustOfWind_Monk,,,,Wisdom)"

new entry "ShapeTheFlowingRiver"
type "PassiveData"
data "DisplayName" "Shape the Flowing River"
data "Description" "You gain the ability to change water to ice within the area and vice versa."
data "Boosts" "UnlockSpell(Target_ShapeTheFlowingRiver,,,,Wisdom)"

new entry "SweepingCinderStrike"
type "PassiveData"
data "DisplayName" "Sweeping Cinder Strike"
data "Description" "You can spend 2 ki points to cast Burning Hands."
data "Boosts" "UnlockSpell(Zone_BurningHands_Monk,,,,Wisdom)"

new entry "WaveOfTheRollingEarth"
type "PassiveData"
data "DisplayName" "Wave of the Rolling Earth"
data "Description" "You can spend 6 ki points to cast Wall of Stone."
data "Boosts" "UnlockSpell(Target_WallOfStone_Monk,,,,Wisdom)"

new entry "KnowYourEnemy"
type "PassiveData"
data "DisplayName" "Know Your Enemy"
data "Description" "If you spend at least 10 turns observing or interacting with another creature outside combat, you can learn certain information about its capabilities compared to your own."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_KnowYourEnemy"
data "Boosts" "UnlockSpell(Target_KnowYourEnemy)"

new entry "WarMagic"
type "PassiveData"
data "DisplayName" "War Magic"
data "Description" "When you use your action to cast a cantrip, you can make one weapon attack as a bonus action."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_WarMagic"
data "Conditions" "IsCantrip() and HasUseCosts('ActionPoint', true)"
data "StatsFunctors" "ApplyStatus(SELF,WAR_MAGIC,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "AuraOfWarding"
type "PassiveData"
data "DisplayName" "Aura of Warding"
data "Description" "Ancient magic lies so heavily upon you that it forms an eldritch ward. You and friendly creatures within [1] of you have resistance to damage from spells."
data "DescriptionParams" "Distance(3)"
data "Properties" "Highlighted;ToggledDefaultAddToHotbar;ToggledDefaultOn;IsToggled"
data "Icon" "PassiveFeature_AuraOfWarding"
data "ToggleOnFunctors" "IF(not HasStatus('AURA_OF_WARDING',context.Source)):ApplyStatus(AURA_OF_WARDING,100,-1)"

new entry "AuraOfDevotion"
type "PassiveData"
data "DisplayName" "Aura of Devotion"
data "Description" "You and friendly creatures within [1] of you can't be charmed while you are conscious."
data "DescriptionParams" "Distance(3)"
data "Properties" "Highlighted;ToggledDefaultAddToHotbar;ToggledDefaultOn;IsToggled"
data "Icon" "PassiveFeature_AuraOfDevotion"
data "ToggleOnFunctors" "ApplyStatus(AURA_OF_DEVOTION,100,-1)"

new entry "AuraOfHate"
type "PassiveData"
data "DisplayName" "Aura of Hate"
data "Description" "You, as well any fiends and undead within [1] of you, gain a bonus to melee weapon damage rolls equal to your Charisma modifier (minimum of +1."
data "DescriptionParams" "Distance(3)"
data "Properties" "Highlighted;ToggledDefaultAddToHotbar;ToggledDefaultOn;IsToggled"
data "Icon" "PassiveFeature_AuraOfHate"
data "ToggleOnFunctors" "ApplyStatus(AURA_OF_HATE,100,-1)"

new entry "SignOfIllOmen"
type "PassiveData"
data "DisplayName" "Shared_Passive_SignOfIllOmen_DisplayName"
data "Description" "Shared_Passive_SignOfIllOmen_Description"
data "Boosts" "UnlockSpell(Target_BestowCurse,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a,UntilRest)"

new entry "DreadfulWord"
type "PassiveData"
data "DisplayName" "Dreadful Word"
data "Description" "You can cast Confusion once using a Warlock spell slot. You can't do so again until you finish a Long Rest."
data "Boosts" "UnlockSpell(Target_Confusion,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a,UntilRest)"

new entry "RelentlessHex"
type "PassiveData"
data "DisplayName" "Relentless Hex"
data "Description" "Your curse creates a temporary bond between you and your target, allowing you to magically teleport a target cursed by your Hex spell or by a Warlock feature of yours."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_RelentlessHex"
data "Boosts" "UnlockSpell(Target_RelentlessHex)"

new entry "SculptorOfFlesh"
type "PassiveData"
data "DisplayName" "Sculptor of Flesh"
data "Description" "You can cast Polymorph once using a Warlock spell slot. You can't do so again until you finish a Long Rest."
data "Boosts" "UnlockSpell(Target_Polymorph,MostPowerful,e9127b70-22b7-42a1-b172-d02f828f260a,UntilRest)"

new entry "TrickstersEscape"
type "PassiveData"
data "DisplayName" "Trickster's Escape"
data "Description" "You can cast Freedom of Movement once on yourself without expending a spell slot. You regain the ability to do so when you finish a Long Rest."
data "Boosts" "UnlockSpell(Target_FreedomOfMovement_Invocation,Singular,,UntilRest)"

new entry "DivineStrike_Radiant"
type "PassiveData"
data "DisplayName" "Divine Strike"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_DivineStrike"
data "Description" "You gain the ability to infuse your weapon strikes with divine energy. Once on each of your turns when you hit a creature with a weapon attack, you can cause the attack to deal an extra [1] to the target."
data "DescriptionParams" "DealDamage(1d8,Radiant)"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Hit) and IsMeleeAttack()"
data "StatsFunctors" "CreateExplosion(Projectile_RadiantEffect_Explosion);DealDamage(1d8,Radiant)"
data "StatsFunctorContext" "OnAttack"

new entry "DivineStrike_Poison"
type "PassiveData"
using "DivineStrike_Radiant"
data "Description" "You gain the ability to infuse your weapon strikes with poison – a gift from your deity. Once on each of your turns when you hit a creature with a weapon attack, you can cause the attack to deal an extra [1] to the target."
data "DescriptionParams" "DealDamage(1d8,Poison)"
data "StatsFunctors" "CreateExplosion(Projectile_PoisonEffect_Explosion);DealDamage(1d8,Poison)"

new entry "PotentSpellcasting"
type "PassiveData"
data "DisplayName" "Potent Spellcasting"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_PotentSpellcasting"
data "Description" "You add your Wisdom modifier to the damage you deal with any cleric cantrip."
data "Conditions" "IsCantrip() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "IF(IsDamageTypeRadiant()):DealDamage(WisdomModifier,Radiant);IF(HasDamageDoneForType(DamageType.Necrotic)):DealDamage(WisdomModifier,Necrotic)"
data "StatsFunctorContext" "OnDamage"

new entry "MagicalInspiration"
type "PassiveData"
data "DisplayName" "Magical Inspiration"
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_MagicalInspiration"
data "Description" "If a creature has a Bardic Inspiration die from you and casts a spell that restores hit points or deals damage, the creature can roll that die. Add the number rolled as a bonus to the hit points regained or the damage dealt. The Bardic Inspiration die is then lost."

new entry "EldritchStrike"
type "PassiveData"
data "DisplayName" "Eldritch Strike"
data "Description" "You learn how to make your weapon strikes undercut a creature’s resistance to your spells. When you hit a creature with a weapon attack, that creature has Disadvantage on the next Saving Throw it makes against a spell you cast before the end of your next turn."
data "Icon" "PassiveFeature_EldritchStrike"
data "Conditions" "IsWeaponAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(ELDRITCH_STRIKE,100,2);ApplyStatus(SELF, ELDRITCH_STRIKE_TECHNICAL,100,2)"
data "StatsFunctorContext" "OnAttack"

new entry "CombatSuperiority"
type "PassiveData"
data "DisplayName" "Superiority Dice"
data "Description" "You have four superiority dice, which are d8s. A superiority die is expended when you use it."
data "Boosts" "ActionResource(SuperiorityDie,4,0,d8);IF(CharacterLevelGreaterThan(6)):ActionResource(SuperiorityDie,1,0,d8)"

new entry "ImprovedCombatSuperiority"
type "PassiveData"
data "Icon" "statIcons_RecklessWarcry"
data "Description" "You have five superiority dice, which are d10s. A superiority die is expended when you use it."
data "Boosts" "ActionResource(SuperiorityDie,5,0,d10)"

new entry "DistractingStrike"
type "PassiveData"
data "DisplayName" "Distracting Strike"
data "Description" "Spend a superiority die to make an attack that distracts the target, causing an ally's next attack against the target to have Advantage."
data "Boosts" "UnlockInterrupt(Interrupt_DistractingStrike);UnlockInterrupt(Interrupt_DistractingStrike_Critical)"

new entry "FeintAttack"
type "PassiveData"
data "DisplayName" "Feint Attack"
data "Description" "Spend a superiority die to feint a target, causing your next attack to deal an additional [1] and to be made with Advantage."
data "Boosts" "UnlockSpell(Target_FeintAttack)"
data "Conditions" "HasStatus('FEINT_ATTACK') and IsWeaponAttack() and IsHit()"
data "StatsFunctors" "IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(ResourceRoll(SuperiorityDie,1), MainMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(ResourceRoll(SuperiorityDie,1), MainRangedWeaponDamageType);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(ResourceRoll(SuperiorityDie,1), OffhandMeleeWeaponDamageType);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(ResourceRoll(SuperiorityDie,1), OffhandRangedWeaponDamageType)"
data "StatsFunctorContext" "OnAttack"

new entry "GoadingAttack"
type "PassiveData"
data "DisplayName" "Goading Attack"
data "Description" "Spend a superiority die to make an attack that deals an additional [1] and possibly forces the target to have Disadvantage on Attack Rolls against all creatures except you."
data "DescriptionParams" "LevelMapValue(SuperiorityDie)"
data "Boosts" "UnlockInterrupt(Interrupt_GoadingAttack);UnlockInterrupt(Interrupt_GoadingAttack_Critical)"

new entry "PrecisionAttack"
type "PassiveData"
data "DisplayName" "Precision Attack"
data "Description" "Spend a superiority die to add [1] to a weapon Attack Roll you make."
data "DescriptionParams" "LevelMapValue(SuperiorityDie)"
data "Boosts" "UnlockInterrupt(Interrupt_PrecisionAttack)"

new entry "BaitAndSwitch"
type "PassiveData"
data "DisplayName" "Bait and Switch"
data "Description" "When you're within [1] of a creature, You can expend one superiority die and switch places with an ally within [1] of you that isn't Incapacitated. Until the start of your next turn, you or your ally (your choice) gains a bonus to AC equal to the number rolled."
data "DescriptionParams" "Distance(1.5)"
data "Boosts" "UnlockSpell(Target_BaitAndSwitch)"

new entry "Parry"
type "PassiveData"
data "DisplayName" "Parry"
data "Description" "When another creature damages you with a melee attack, you can use your reaction and expend one superiority die to reduce the damage by the number you roll on your superiority die + [1]."
data "DescriptionParams" "DexterityModifier"
data "Boosts" "UnlockInterrupt(Interrupt_Parry)"

new entry "QuickToss"
type "PassiveData"
data "DisplayName" "Quick Toss"
data "Description" "As a bonus action, you can expend one superiority die and make a ranged attack with a weapon that has the thrown property. You can draw the weapon as part of making this attack. If you hit, add the superiority die to the weapon's damage roll."
data "Boosts" "UnlockSpell(Throw_QuickToss)"

new entry "Smite_Divine_3"
type "PassiveData"
data "DisplayName" "Shared_Passive_Smite_Divine_2_DisplayName"
data "Properties" "IsHidden"
data "Boosts" "UnlockInterrupt(Interrupt_Smite_Divine_3);UnlockInterrupt(Interrupt_Smite_Divine_Critical_3)"

new entry "Smite_Divine_4"
type "PassiveData"
data "DisplayName" "Shared_Passive_Smite_Divine_2_DisplayName"
data "Properties" "IsHidden"
data "Boosts" "UnlockInterrupt(Interrupt_Smite_Divine_4);UnlockInterrupt(Interrupt_Smite_Divine_Critical_4)"

new entry "Smite_Divine_5"
type "PassiveData"
data "DisplayName" "Shared_Passive_Smite_Divine_2_DisplayName"
data "Properties" "IsHidden"
data "Boosts" "UnlockInterrupt(Interrupt_Smite_Divine_5);UnlockInterrupt(Interrupt_Smite_Divine_Critical_5)"

new entry "SupremeSneak"
type "PassiveData"
data "DisplayName" "Supreme Sneak"
data "Description" "You have Advantage on a Dexterity (Stealth) check if you move no more than half your speed on the same turn."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_SupremeSneak"
data "Boosts" "IF(HasActionResource('Movement',50,0,true,context.Source)):Advantage(Skill,Stealth)"

new entry "MagicalAmbush"
type "PassiveData"
data "DisplayName" "Magical Ambush"
data "Description" "If you are hidden from a creature when you cast a spell on it, the creature has Disadvantage on any Saving Throw it makes against the spell this turn."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_MagicalAmbush"
data "StatsFunctors" "IF(not HasStatus('MAGICAL_AMBUSH_AURA',context.Source)):ApplyStatus(MAGICAL_AMBUSH_AURA,100,-1)"
data "StatsFunctorContext" "OnStatusApplied"

new entry "EmpoweredEvocation"
type "PassiveData"
data "DisplayName" "Empowered Evocation"
data "Description" "You can add your Intelligence modifier (minimum of +1) to one damage roll of any wizard evocation spell that you cast."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_EmpoweredEvocation"
data "Conditions" "IsSpellSchool(SpellSchool.Evocation)"
data "StatsFunctors" "IF(IsDamageTypeAcid()):DealDamage(IntelligenceModifier,Acid);IF(IsDamageTypeCold()):DealDamage(IntelligenceModifier,Cold);IF(IsDamageTypeFire() and not SpellId('Target_GreenFlameBlade') and not SpellId('Projectile_GreenFlameBlade_Free')):DealDamage(IntelligenceModifier,Fire);IF(IsDamageTypeLightning()):DealDamage(IntelligenceModifier,Lightning);IF(IsDamageTypeThunder() and not SpellId('Target_BoomingBlade')):DealDamage(IntelligenceModifier,Thunder);IF(IsDamageTypeRadiant()):DealDamage(IntelligenceModifier,Radiant);IF(IsDamageTypePoison()):DealDamage(IntelligenceModifier,Poison);IF(IsDamageTypePsychic()):DealDamage(IntelligenceModifier,Psychic);IF(IsDamageTypeForce()):DealDamage(IntelligenceModifier,Force);IF(IsDamageTypeSlashing()):DealDamage(IntelligenceModifier,Slashing);IF(IsDamageTypeBludgeoning()):DealDamage(IntelligenceModifier,Bludgeoning);IF(IsDamageTypePiercing()):DealDamage(IntelligenceModifier,Piercing);IF(HasDamageDoneForType(Damage.Necrotic)):DealDamage(IntelligenceModifier,Necrotic);IF(ScorchingRay() and HasDamageEffectFlag(DamageFlags.Hit) and not HasStatus('SCORCHING_RAY_BLOCK',context.Source)):ApplyStatus(SELF,SCORCHING_RAY_BLOCK,100,1)"
data "StatsFunctorContext" "OnDamage"

new entry "ImprovedAbjuration"
type "PassiveData"
data "DisplayName" "Improved Abjuration"
data "Description" "When you cast an abjuration spell that requires you to make an ability check as a part of casting that spell (as in Counterspell and Dispel Magic), you add your proficiency bonus to that ability check."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_ImprovedAbjuration"
data "Boosts" "RollBonus(RawAbility,-ProficiencyBonus,Intelligence)"

new entry "DivineIntervention"
type "PassiveData"
data "DisplayName" "Divine Intervention"
data "Description" "You can call on your deity to intervene on your behalf when your need is great."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_DivineIntervention"
data "Boosts" "UnlockSpell(Shout_DivineIntervention)"

new entry "ThoughtShield"
type "PassiveData"
data "DisplayName" "Thought Shield"
data "Description" "Your thoughts can't be read by telepathy or other means unless you allow it. You also have resistance to psychic damage, and whenever a creature deals psychic damage to you, that creature takes the same amount of damage that you do."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_ThoughtShield"
data "Boosts" "Resistance(Psychic,Resistant)"
data "Conditions" "IsDamageTypePsychic()"
data "StatsFunctors" "ApplyStatus(THOUGHT_SHIELD,100,1)"
data "StatsFunctorContext" "OnDamaged"

new entry "ThoughtShield_Toggle"
type "PassiveData"
data "DisplayName" "Thought Shield"
data "Description" "Whenever a creature deals psychic damage to you, that creature takes the same amount of damage that you do."
data "Properties" "IsHidden;IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn"
data "Icon" "PassiveFeature_ThoughtShield"
data "ToggleOnFunctors" "ApplyStatus(THOUGHT_SHIELD_TOGGLE,100,-1)"

new entry "FiendishResistance"
type "PassiveData"
data "DisplayName" "Fiendish Resistance"
data "Description" "You can choose one damage type when you finish a short or long rest. You gain resistance to that damage type until you choose a different one with this feature."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_FiendishResistance"
data "Boosts" "IF(HasStatus('FIENDISH_RESISTANCE',context.Source)):UnlockSpell(Shout_FiendishResistance)"
data "BoostContext" "OnStatusApplied"
data "StatsFunctors" "ApplyStatus(FIENDISH_RESISTANCE,100,-1)"
data "StatsFunctorContext" "OnShortRest;OnLongRest"

new entry "AscendentStep"
type "PassiveData"
data "DisplayName" "Ascendent Step"
data "Description" "You can cast Levitate on yourself at will, without expending a spell slot or material components."
data "Boosts" "UnlockSpell(Target_Levitate_AscendentStep)"

new entry "OtherworldlyLeap"
type "PassiveData"
data "DisplayName" "Otherworldly Leap"
data "Description" "You can cast Jump at will, without expending a spell slot."
data "Boosts" "UnlockSpell(Target_Jump_OtherworldlyLeap)"

new entry "WhispersOfTheGrave"
type "PassiveData"
data "DisplayName" "Whispers of the Grave"
data "Description" "You can cast Speak with Dead at will, without expending a spell slot."
data "Boosts" "UnlockSpell(Target_SpeakWithDead_WhispersOfTheGrave)"

new entry "GiftOfTheProtectors"
type "PassiveData"
data "DisplayName" "Gift of the Protectors"
data "Description" "A new page appears in your Book of Shadows. A creature can use its action to write its name on that page, which can contain a number of names equal to your proficiency bonus. When any creature whose name is on the page is reduced to [1] but not killed outright, the creature magically drops to [2] instead. Once this magic is triggered, no creature can benefit from it until you finish a long rest. As an action, you can magically erase a name on the page by touching it."
data "DescriptionParams" "RegainHitPoints(0);RegainHitPoints(1)"
data "Icon" "PassiveFeature_GiftOfTheProtectors"
data "Boosts" "UnlockSpell(Target_GiftOfTheProtectors);ActionResource(GiftOfTheProtectors,4,0);IF(ConditionResult(context.Source.ProficiencyBonus > 4)):ActionResource(GiftOfTheProtectors,1,0);IF(ConditionResult(context.Source.ProficiencyBonus > 5)):ActionResource(GiftOfTheProtectors,1,0)"

new entry "GiftOfTheProtectors_Status"
type "PassiveData"
data "Properties" "IsHidden"
data "StatsFunctors" "IF(HasPassive('GiftOfTheProtectors',context.Source) and not HasStatus('GIFT_OF_THE_PROTECTORS_AURA',context.Source) and not HasStatus('GIFT_OF_THE_PROTECTORS_BLOCK_AURA',context.Source)):ApplyStatus(GIFT_OF_THE_PROTECTORS_AURA,100,-1)"
data "StatsFunctorContext" "OnEquip;OnInventoryChanged;OnActionResourcesChanged;OnAttacked;OnHealed;OnStatusApplied"

new entry "InvestmentOfTheChainMaster"
type "PassiveData"
data "DisplayName" "Investment of the Chain Master"
data "Description" "When you cast Find Familiar, you infuse the summoned familiar with a measure of your eldritch power, granting the creature the following benefits. The familiar gains the ability to fly, their weapon attacks are considered magical for the purpose of overcoming immunity and resistance to nonmagical attacks, it uses your spell save DC when forcing a creature to make a saving throw and you can use your reaction to grant it resistance against any damage it takes."
data "Properties" "Highlighted"
data "Icon" "PassiveFeature_InvestmentOfTheChainMaster"
data "Boosts" "UnlockInterrupt(Interrupt_InvestmentOfTheChainMaster);IF(HasPassive('PactOfTheChain',context.Source)):UnlockSpell(Target_InvestmentOfTheChainMaster_Command)"

new entry "ImprovedAbjuration"
type "PassiveData"
data "DisplayName" "Improved Abjuration"
data "Description" "When you cast an abjuration spell that requires you to make an Ability Check as a part of casting that spell, you add your proficiency bonus to that Ability Check."
data "Boosts" "IF(IsSpellSchool(SpellSchool.Abjuration)):RollBonus(RawAbility,ProficiencyBonus,Intelligence)"

new entry "PactOfTheChain"
type "PassiveData"
data "DisplayName" "Shared_Passive_PactOfTheChain_DisplayName"
data "Description" "Shared_Passive_PactOfTheChain_Description"
data "Properties" "Highlighted"
data "Boosts" "UnlockSpell(Target_FindFamiliar_Ritual);UnlockSpell(Target_PactOfTheChain_Imp);UnlockSpell(Target_PactOfTheChain_Quasit);UnlockSpell(Target_PactOfTheChain_Pseudodragon);UnlockSpell(Target_PactOfTheChain_Commands)"